"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),MGMControllerNA=void 0===MGMControllerNA?{}:MGMControllerNA;MGMControllerNA={init:function(){MGMControllerNA.events()},events:function(){if(void 0!==$("#sharerLink").attr("data-temporalid")){var e=encodeURIComponent($("#sharerLink").attr("data-temporalid")),t=window.location.host+"/"+language+"?rcmdr="+e;$("#btnFacebook").attr("data-url",window.location.protocol+"//"+t+"&mgmFBSharer=true"),$("#sharerLink").attr("data-url",t),t+="&sourceConversion=AS_enlace_mgm.ESP&utm_source=enlace&utm_medium=interno&utm_campaign=invitaysuma",$("#sharerLink").val(t)}$("#btnSharer").click(function(){$(this).hasClass("closed")?MGMControllerNA.openShareMenu():MGMControllerNA.closeShareMenu()}),null!=document.getElementById("btnClipboard")&&void 0!=document.getElementById("btnClipboard")&&document.getElementById("btnClipboard").addEventListener("click",function(){MGMControllerNA.copyToClipboard()}),$("#btnEmail").click(function(){MGMControllerNA.shareByEmail()}),$("#btnFacebook").click(function(){window.open($(this).attr("data-url"))}),$("#btnTwitter").click(function(){var e="¡Amigos!%20Ahora,%20si%20os%20registráis%20en%20Danone.es%20sólo%20por%20hacerlo%20recibiréis%2020%20puntos%20de%20bienvenida,%20más%2020%20puntos%20extra%20por%20haber%20recibido%20esta%20invitación!",t=window.location.protocol+"//"+encodeURIComponent($("#sharerLink").attr("data-url")+"&sourceConversion=AS_twitter_mgm.ESP&utm_source=twitter&utm_medium=social&utm_campaign=invitaysuma");"ca"==language&&(e="Amics!%20Ara,%20només%20per%20registrar-vos%20a%20Danone.es%20rebreu%2020%20punts%20de%20benvinguda,%20més%2020%20punts%20extra%20per%20haver%20rebut%20aquesta%20invitació!"),window.open("https://twitter.com/intent/tweet?text="+e+"&url="+t+"&hashtags=Danone","mywindow","status=1"),MGMControllerNA.closeShareMenu()}),$(document).click(function(e){$(e.target).closest("#btnSharer").length||$(".menu-comparte").hasClass("none")||MGMControllerNA.closeShareMenu()})},openShareMenu:function(){$(".menu-comparte").removeClass("none"),$(".sharer-arrow").removeClass("fa-caret-down"),$(".sharer-arrow").addClass("fa-caret-up"),$("#btnSharer").removeClass("closed"),$("#btnSharer").addClass("opened")},closeShareMenu:function(){$(".menu-comparte").hasClass("none")||$(".menu-comparte").addClass("none"),$(".sharer-arrow").addClass("fa-caret-down"),$(".sharer-arrow").removeClass("fa-caret-up"),$("#btnSharer").removeClass("opened"),$("#btnSharer").addClass("closed")},copyToClipboard:function(){$("#sharerLink").removeAttr("disabled"),$("#sharerLink").select();var e=!1;e=document.execCommand("copy"),$("#sharerLink").attr("disabled","disabled"),MGMControllerNA.closeShareMenu(),e?"ca"==language?alert("Link copiat al porta-retalls"):alert("Enlace copiado en el portapapeles"):"ca"==language?alert("El link no s'ha copiat al porta-retalls, recarrega la pàgina"):alert("El enlace no se ha copiado en el portapapeles, recarga la página")},shareByEmail:function(){var e="%0D%0A",t=$("#btnEmail").attr("data-mgmname"),a=window.location.protocol+"//"+encodeURIComponent($("#sharerLink").attr("data-url")+"&sourceConversion=AS_email_mgm.ESP&utm_source=email&utm_medium=newsletter&utm_campaign=invitaysuma"),o=t+"%20tiene%20un%20regalo%20para%20ti:%20Te%20invita%20a%20que%20te%20unas%20a%20la%20familia%20Danone.",i="Regístrate en Danone.es y sólo por hacerlo recibirás 20 puntos de bienvenida, más 20 puntos extra por haber recibido una invitación. ";i+="Estos puntos se pueden usar para conseguir cupones de descuento, participar en promociones o conseguir regalos exclusivos."+e+e,i+="Entra en este enlace y en menos de un minuto podrás completar tu registro: "+e+a+e+e,i+="¡Regalos como este que te ha hecho "+t+" hay que aprovecharlos!"+e+e+e+e,"ca"==language&&(o=t+"%20un%20amic%20té%20un%20regal%20per%20a%20tu:%20Et%20convida%20a%20que%20t'uneixis%20a%20la%20família%20Danone.",i="Registra't a Danone.es i tan sols per fer-ho rebràs 20 punts de benvinguda, més 20 punts extra per haver rebut una invitació. ",i+="Aquests punts es poden utilizar per a aconseguir cupons de descompte, participar en promocions o aconseguir regals exclusius."+e+e,i+="Entra a aquest enllaç i en menys d'un minut podràs completar el teu registre:"+e+a+e+e,i+="Regals com aquest que t'ha fet "+t+" els has d'aprofitar!"+e+e+e+e);var n="mailto:?subject="+o+"&body="+i;window.location.href=n},clickToSharer:function(){$("html, body").animate({scrollTop:300},800)}};var MGMFBControllerNA=void 0===MGMFBControllerNA?{}:MGMFBControllerNA;MGMFBControllerNA={init:function(){MGMFBControllerNA.events()},events:function(){MGMFBControllerNA.share()},share:function(){var e=window.location.href,t=e.substring(0,e.indexOf("&mgmFBSharer")),a="https://www.facebook.com/sharer/sharer.php?u=";a+=encodeURIComponent(t+"&sourceConversion=AS_facebook_mgm.ESP&utm_source=facebook&utm_medium=social&utm_campaign=invitaysuma"),a+="&t=",a+="ca"==language?encodeURIComponent("Amics! Ara, només per registrar-vos a Danone.es rebreu 20 punts de benvinguda, més 20 punts extra per haver rebut aquesta invitació!"):encodeURIComponent("¡Amigos! Ahora, si os registráis en Danone.es sólo por hacerlo recibiréis 20 puntos de bienvenida, más 20 puntos extra por haber recibido esta invitación!"),window.location.href=a}};var ArticleControllerNA=void 0===ArticleControllerNA?{}:ArticleControllerNA;ArticleControllerNA={init:function(){ArticleControllerNA.checkWidth()},sizeOffset:7,sizeOffsetSecondLevel:11,checkWidth:function(){$(".image-content").each(function(e,t){var a=$(t).attr("src");window.innerWidth>480?$(t).attr("src",a.replace("%WIDTH%/%HEIGHT%","938/535")):$(t).attr("src",a.replace("%WIDTH%/%HEIGHT%","616/351"))}),$(".recomended-image-big").each(function(e,t){var a=$(t).css("background-image");window.innerWidth>480?$(t).css("background-image",a.replace("%WIDTH%/%HEIGHT%","938/535")):$(t).css("background-image",a.replace("%WIDTH%/%HEIGHT%","616/351"))})},moreRecomended:function(e,t){var a="firstLevel"===t?ArticleControllerNA.sizeOffset:ArticleControllerNA.sizeOffsetSecondLevel,o="firstLevel"===t?6:7;e=JSON.parse(e),Utils.loader(),$.ajax("/ajax/article/getList",{method:"POST",data:{rowcount:o,offset:a,sticky:0,tags:e}}).done(function(e){if(Utils.loader(),e.exception);else{var i="",n="",r="",s=[],l="";if(e.articleList.length&&o===e.articleList.length?"firstLevel"===t?ArticleControllerNA.sizeOffset=a+o:ArticleControllerNA.sizeOffsetSecondLevel=a+o:$("#more-content").hide(),"firstLevel"===t)for(var d=0;d<e.articleList.length;d++){if(n=e.articleList[d].image.url?e.articleList[d].image.url:"",0==d&&(i+='<div class="row recommended recommended-margin" data-offset="6">'),3==d&&(i+='</div><div class="row recommended recommended-margin" data-offset="'+(a+1)+'">'),0==d||5==d)n=window.innerWidth>480?n.replace("%WIDTH%/%HEIGHT%","938/535"):n.replace("%WIDTH%/%HEIGHT%","616/351"),i+='<div class="small-12 medium-12 large-6 columns div-articulo-grande"><a href="/'+e.articleList[d].routeAlias+'" target="_blank"><div class="recomended-image-big padded-column" style="background-image: url('+n+');"><p class="recomended-title1-white">'+e.articleList[d].tags[0]+'</p><p class="recomended-title2-white">'+e.articleList[d].title+"</p></div></a></div>";else{s=[];for(var c=0;c<Math.min(e.articleList[d].freeTags.length,4);c++)r=e.articleList[d].freeTags[c],s.push('<a href="/'+e.articleList[d].freeTagsPath[r]+'">'+r+"</a>");l="",0!=e.articleList[d].freeTags.length&&(l="<p>TEMAS: "+s.join(", ")+"</p>"),i+='<div class="small-12 medium-6 large-3 columns div-articulo-pequeno"><a href="/'+e.articleList[d].routeAlias+'" target="_blank"><div></div><div class="recomended-image-small padded-column" style="background-image: url('+n.replace("%WIDTH%/%HEIGHT%","297/169")+');" onclick="javascript:window.open(\'/'+e.articleList[d].routeAlias+'\')"></div><p class="recomended-title1">'+e.articleList[d].tags[0]+'</p><p class="recomended-title2">'+e.articleList[d].title+'</p><div class="recomended-body"><p>'+e.articleList[d].shortDescription+'</p></div></a><div class="recommender-temas">'+l+"</div></div>"}5==d&&(i+="</div>")}else for(var d=0;d<e.articleList.length;d++){if(n=e.articleList[d].image.url?e.articleList[d].image.url:"",0===d&&(i+='<div class="row recommended recommended-margin" data-offset="6">'),3!==d&&7!==d||(i+='</div><div class="row recommended recommended-margin" data-offset="'+(a+1)+'">'),0===d||8===d)n=window.innerWidth>480?n.replace("%WIDTH%/%HEIGHT%","938/535"):n.replace("%WIDTH%/%HEIGHT%","616/351"),i+='<div class="small-12 medium-12 large-6 columns div-articulo-grande"><a href="/'+e.articleList[d].routeAlias+'" target="_blank"><div class="recomended-image-big padded-column" style="background-image: url('+n+');"><p class="recomended-title1-white">'+e.articleList[d].tags[0]+'</p><p class="recomended-title2-white">'+e.articleList[d].title+"</p></div></a></div>";else{s=[];for(var c=0;c<Math.min(e.articleList[d].freeTags.length,4);c++)r=e.articleList[d].freeTags[c],s.push('<a href="/'+e.articleList[d].freeTagsPath[r]+'">'+r+"</a>");l="",0!=e.articleList[d].freeTags.length&&(l="<p>TEMAS: "+s.join(", ")+"</p>"),i+='<div class="small-12 medium-6 large-3 columns div-articulo-pequeno"><a href="/'+e.articleList[d].routeAlias+'" target="_blank"><div class="recomended-image-small padded-column" style="background-image: url('+n.replace("%WIDTH%/%HEIGHT%","297/169")+');" onclick="javascript:window.open(\'/'+e.articleList[d].routeAlias+'\')"></div><p class="recomended-title1">'+e.articleList[d].tags[0]+'</p><p class="recomended-title2">'+e.articleList[d].title+'</p><div class="recomended-body"><p>'+e.articleList[d].shortDescription+'</p></div></a><div class="recommender-temas">'+l+"</div></div>"}9===d&&(i+="</div>")}$(i).insertBefore(".more-content")}})}};var AvatarControllerNA=void 0===AvatarControllerNA?{}:AvatarControllerNA;AvatarControllerNA={init:function(){$("#popupChangeAvatar .img-avatar").click(function(){AvatarControllerNA.selectingAvatar($(this))}),$("#avatarExternalUrl").change(function(){$(this).val($.trim($(this).val())),$("#avatarExternalUrl").removeClass("input-error"),$("#avatarExternalUrlError").html("&nbsp;")})},openAvatarPopup:function(){dataLayer.push({event:"cambiar_avatar",event_category:"autogestion",event_action:"mis datos",event_label:"cambiar mi avatar"}),$("#popupChangeAvatar .img-avatar").removeClass("selected");var e="";void 0!=data.attributes.url_imagen&&""!=data.attributes.url_imagen&&(e=data.attributes.url_imagen),$("#popupChangeAvatar .img-avatar").each(function(t,a){void 0!=e&&""!=e?-1!=$(this).attr("src").indexOf(e)&&$(this).addClass("selected"):"mujer"===data.attributes.sexo&&-1!=$(this).attr("src").indexOf("d_avatar-02.png")?$(this).addClass("selected"):"hombre"===data.attributes.sexo&&-1!=$(this).attr("src").indexOf("d_avatar-07.png")&&$(this).addClass("selected")}),void 0!=e&&""!=e&&0==$(".img-avatar").hasClass("selected")&&$("#avatarExternalUrl").val(data.attributes.url_imagen),$("#popupChangeAvatar").foundation("open")},selectingAvatar:function(e){!1===e.hasClass("selected")&&($(".img-avatar").removeClass("selected"),e.addClass("selected"))},setAvatar:function(){if(Utils.loader(),""!=$("#avatarExternalUrl").val()){var e=$("#avatarExternalUrl").val();$.ajax({url:"/ajax/consumer/checkExternalAvatar",method:"POST",data:{path:e}}).done(function(t){"true"===t?AvatarControllerNA.updateAvatar(e):(Utils.loader(),$("#avatarExternalUrl").addClass("input-error"),$("#avatarExternalUrlError").html(t))})}else AvatarControllerNA.updateAvatar($.trim($(".img-avatar.selected").attr("name")))},updateAvatar:function(e){void 0!=e&&""!=e?$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:{url_imagen:e}}).done(function(e){Utils.loader(),"ok"===e.status&&($("#popupChangeAvatar").foundation("close"),dataLayer.push({event:"avatar_modificado",event_category:"autogestion",event_action:"mis datos",event_label:"avatar modificado"})),location.reload()}):alert("Tienes que seleccionar una imagen")}};var CouponControllerNA=void 0===CouponControllerNA?{}:CouponControllerNA;CouponControllerNA={init:function(){},addBasket:function(e){JSON.parse(atob(e),!0)}};var FooterControllerNA=void 0===FooterControllerNA?{}:FooterControllerNA;FooterControllerNA={init:function(){FooterControllerNA.openPopupFooter()},openPopupFooter:function(){$(document).on("open.zf.reveal","#idTermsAndConditions",function(){/^ *$/.test($("#idTermsAndConditions .modal-title").text())&&(Utils.loader("#idTermsAndConditions","footer-loader"),$.ajax({url:"/"+language+"/ajax/home/getFooter",method:"POST",data:{popup:"idTermsAndConditions"}}).done(function(e){$("#idTermsAndConditions .modal-title").html(e.title),$("#idTermsAndConditions .modal-bottom-txt").html(e.body),Utils.loader("#idTermsAndConditions","footer-loader")}))}),$(document).on("open.zf.reveal","#idPrivacityPolitic",function(){/^ *$/.test($("#idPrivacityPolitic .modal-title").text())&&(Utils.loader("#idPrivacityPolitic","footer-loader"),$.ajax({url:"/"+language+"/ajax/home/getFooter",method:"POST",data:{popup:"idPrivacityPolitic"}}).done(function(e){$("#idPrivacityPolitic .modal-title").html(e.title),$("#idPrivacityPolitic .modal-bottom-txt").html(e.body),Utils.loader("#idPrivacityPolitic","footer-loader")}))}),$(document).on("open.zf.reveal","#idProgramConditions",function(){/^ *$/.test($("#idProgramConditions .modal-title").text())&&(Utils.loader("#idProgramConditions","footer-loader"),$.ajax({url:"/"+language+"/ajax/home/getFooter",method:"POST",data:{popup:"idProgramConditions"}}).done(function(e){$("#idProgramConditions .modal-title").html(e.title),$("#idProgramConditions .modal-bottom-txt").html(e.body),Utils.loader("#idProgramConditions","footer-loader")}))}),$(document).on("open.zf.reveal","#idPromotionsConditions",function(){/^ *$/.test($("#idPromotionsConditions .modal-title").text())&&(Utils.loader("#idPromotionsConditions","footer-loader"),$.ajax({url:"/"+language+"/ajax/home/getFooter",method:"POST",data:{popup:"idPromotionsConditions"}}).done(function(e){$("#idPromotionsConditions .modal-title").html(e.title),$("#idPromotionsConditions .modal-bottom-txt").html(e.body),Utils.loader("#idPromotionsConditions","footer-loader")}))}),$(document).on("open.zf.reveal","#idPurchaseGeneralConditions",function(){/^ *$/.test($("#idPurchaseGeneralConditions .modal-title").text())&&(Utils.loader("#idPurchaseGeneralConditions","footer-loader"),$.ajax({url:"/"+language+"/ajax/home/getFooter",method:"POST",data:{popup:"idPurchaseGeneralConditions"}}).done(function(e){$("#idPurchaseGeneralConditions .modal-title").html(e.title),$("#idPurchaseGeneralConditions .modal-bottom-txt").html(e.body),Utils.loader("#idPurchaseGeneralConditions","footer-loader")}))})},telephoneSacTag:function(){dataLayer.push({event:"contacto",event_category:"sac",event_action:"llamada",event_label:"ok"})},pideGDPR:function(e){Utils.loader(".GDPR_loader","footer-loader"),$.ajax({url:"/"+language+"/ajax/consumer/consumerUpdate",method:"POST",data:{publicidad_GDPR:e}}).done(function(t){Utils.loader(".GDPR_loader","footer-loader"),$("#GDPR").foundation("close"),site.isLogged.attributes.publicidad_GDPR=e})}};var language=void 0===language?-1!==$.inArray(document.location.pathname.slice(1,3),["es","ca","pt"])?document.location.pathname.slice(1,3):"es":language,url=window.location.pathname.replace(".html","").replace("/es/","home/").replace("/ca/","home/").replace("/pt/","home/").replace(/\s/g,"-");if("undefined"!=typeof Storage)try{var site=JSON.parse(null===localStorage.getItem("site")?'{"isLogged": []}':localStorage.getItem("site"))}catch(e){var site={isLogged:[]}}var product=void 0===product?{}:product,__device={};!function(){var e=navigator.userAgent;/Playstation Vita/.test(e)?__device.vita=!0:/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?__device.kindle=!0:/Android/.test(e)?__device.android=!0:/CrOS/.test(e)?__device.chromeOS=!0:/iP[ao]d|iPhone/i.test(e)?(__device.iOS=!0,navigator.appVersion.match(/OS (\d+)/),__device.iOSVersion=parseInt(RegExp.$1,10)):/Linux/.test(e)?__device.linux=!0:/Mac OS/.test(e)?__device.macOS=!0:/Windows/.test(e)&&(__device.windows=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(__device.android=!1,__device.iOS=!1,__device.macOS=!1,__device.windows=!0,__device.windowsPhone=!0);var t=/Silk/.test(e);(__device.windows||__device.macOS||__device.linux&&!t||__device.chromeOS)&&(__device.desktop=!0),(__device.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(__device.desktop=!1)}();var HeaderControllerNA=void 0===HeaderControllerNA?{}:HeaderControllerNA;HeaderControllerNA={init:function(){HeaderControllerNA.events(),NotificationControllerNA.hideNotification(),$(document).ready(function(){Utils.watching(site.isLogged,"pointsAvailable",site.isLogged.pointsAvailable,HeaderControllerNA.refreshPointsWeb)}),void 0!==window.idzCustomData&&(window.idzCustomData.cust_name=void 0!==site.isLogged.status?site.isLogged.attributes.nombre:"",window.idzCustomData.cust_email=void 0!==site.isLogged.status?site.isLogged.email:"")},events:function(){$(".dropdown-btn").click(function(){$("#menu-responsive").slideToggle()}),$("#btnCloseMenu").click(function(){1==$(this).hasClass("back")?($("#menu-responsive .menu-item.active").click(),$(".navigation-action.active").click()):($("#menu-responsive").slideToggle(),$(".dropdown-btn").toggleClass("hide"),$("#dropdownMobile").toggleClass("hide"))}),$("#menu-responsive .menu-item:not(.direct)").click(function(){$('.is-accordion-submenu-parent[aria-expanded="true"] .submenu-item-link').click(),$(this).toggleClass("active"),$(this).siblings().removeClass("active"),$(this).parent().toggleClass("move-out"),1==$("#btnCloseMenu").hasClass("back")?($("#btnCloseMenu").removeClass("back"),$("#btnCloseMenu").html("Cerrar")):($("#btnCloseMenu").addClass("back"),$("#btnCloseMenu").html("Atrás")),$(this).children(".submenu-list").toggleClass("hide"),$(this).siblings().children(".submenu-list").addClass("hide"),$(".submenu-breadcum").toggleClass("hide").html("<span>"+$(this).children(".menu-item-link").text()+"</span>")}),$(".is-accordion-submenu-parent").click(function(e){e.stopPropagation()}),$("#menu-responsive ul.menu:not(.vertical,.opened)>.menu-item").hover(function(){$(this).children(".submenu").addClass("animated fadeIn")})},logout:function(){$.ajax({url:"/ajax/consumer/logout",method:"POST",data:{}}).done(function(){site.isLogged={},localStorage.setItem("site",JSON.stringify(site)),sessionStorage.removeItem("GDPR_modal_showed"),window.location.href=document.location.href.split("?")[0].split("#")[0]})},changeLanguage:function(){var e=location.pathname.slice(1,3);e="es"===e?"ca":"es",$.ajax({url:"/ajax/parent/setLocale",method:"POST",data:{locale:e}}).done(function(){window.location.href=location.origin+"/"+e,void 0===location.origin&&(window.location.href=location.protocol+"//"+location.hostname+"/"+e),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"modificar idioma",event_label:"idioma modificado a"+e})})},searchInput:function(e){var t=location.pathname.slice(1,3),a=$(e).find("input[name=search]").val();if(void 0!==a&&""!==a){var o=a.trim().replace(/\s+/g,"-").replace(/,/g,"").toLowerCase();location.replace(location.origin+"/"+t+"/buscar/"+o)}},getContent:function(e){var t=$(e);if(t.attr("loaded"))return!1;$.ajax({url:"/ajax/article/getList",method:"POST",data:{tags:t.attr("tags"),freeTags:t.attr("freeTags"),view:t.attr("view"),brand:t.attr("brand"),sticky:t.attr("issticky"),difficulty:t.attr("difficult"),offset:t.attr("offset"),rowcount:t.attr("rowcount")}}).done(function(e){if(e.exception);else{t.attr("loaded",!0);for(var a=0;a<3;a++){if(void 0===e.articleList[a]){$(t.next().find(".content-img")[a]).parent().parent().remove(),1===a&&$(t.next().find(".content-img")[1]).parent().parent().remove();break}$(t.next().find("content.content")[a]).data("nid",e.articleList[a].nid),null!=e.articleList[a].urlVideo&&""!=e.articleList[a].urlVideo&&$(t.next().find(".content-figure")[a]).addClass("video is-youtube"),$(t.next().find(".content-img-link")[a]).attr("href","/"+e.articleList[a].routeAlias),null!=e.articleList[a].image.url?($(t.next().find(".content-img")[a]).attr("src",e.articleList[a].image.url.replace("%WIDTH%/%HEIGHT%","297/169")),$(t.next().find(".content-img")[a]).attr("alt",e.articleList[a].image.alt)):$(t.next().find(".content-img")[a]).parent().parent().remove(),$(t.next().find(".content-title-link")[a]).attr("href","/"+e.articleList[a].routeAlias),$(t.next().find(".content-title-link div p")[a]).text(e.articleList[a].title)}}})},refreshPointsWeb:function(){$("#graph1 span").length&&$("#graph1 span").text(site.isLogged.pointsAvailable),$(".header-user-points span").length&&$(".header-user-points span").text(site.isLogged.pointsAvailable),$(".pincodePoints-title-points").length&&$(".pincodePoints-title-points").text(site.isLogged.pointsAvailable)},setLocalStorage:function(){try{localStorage.setItem("site",JSON.stringify(site))}catch(e){}},switchMenuBrandImage:function(e){document.querySelectorAll(".menu-item .our-brands .menu-image")[0].src="danone"!==e?"/images/sku/"+e+".png":"/images/logo_marcas.jpg"},openModalSumarPuntos:function(){void 0!==site.isLogged.literalCID?($("body").addClass("body-popup"),$("#modalPincodeAddPoints").show()):showModalLogin()},closeModalSumarPuntos:function(){$("body").removeClass("body-popup"),$("#modalPincodeAddPoints").hide()}};var Loader=function(){function e(){_classCallCheck(this,e),this.initControllers=function(){for(var e=document.querySelectorAll("[init-controller]"),t=0;t<e.length;t++)window[Utils.capitalize(e[t].attributes["init-controller"].value)].init()},this.loadSettingsSlicks=function(){for(var e=document.querySelectorAll("slick,[settings]"),t=0;t<e.length;t++)SlickSetting.loadSetting(e[t],e[t].attributes.settings.value)}}return _createClass(e,[{key:"init",value:function(){Utils.show(),this.initControllers(),this.loadSettingsSlicks()}}]),e}();$(document).ready(function(){(new Loader).init()});var NotificationControllerNA=void 0===NotificationControllerNA?{}:NotificationControllerNA;NotificationControllerNA={init:function(){},openNotification:function(){dataLayer.push({event:"notificacion_abrir",event_category:"Notificaciones",event_action:"Abrir",event_label:"Mostrar notificaciones"})},notificationClick:function(e){e=JSON.parse(atob(e)),dataLayer.push({event:"notificacion_clic",event_category:"Notificaciones",event_action:"Click en notificacion",event_label:e.title})},closeNotification:function(){dataLayer.push({event:"notificacion_cerrar",event_category:"Notificaciones",event_action:"Cerrar",event_label:"Ocultar notificaciones"}),$("#topNotification").slideUp(500),site.close_n=!0,localStorage.setItem("site",JSON.stringify(site))},hideNotification:function(){if(void 0!==site.isLogged.literalCID)return!1;window.site.close_n?$("#topNotification").slideUp(500):($("#topNotification").show(),setTimeout(function(){$("#topNotification").slideUp(500),site.close_n=!0,localStorage.setItem("site",JSON.stringify(site))},1e4))},readNotification:function(e){var e=atob(e);$.ajax({url:"/ajax/notification/read",method:"POST",data:{literalNotification:e}}).done(function(t){dataLayer.push({event:"notificacion_clic",event_category:"Notificaciones",event_action:"Click en notificacion",event_label:e})})}};var PincodeControllerNA=void 0===PincodeControllerNA?{}:PincodeControllerNA;PincodeControllerNA={init:function(){PincodeControllerNA.addAutoPincodeQR(),Utils.selectCustomized("#select-points-qr"),PincodeControllerNA.eventosSelectCustomized()},addAutoPincodeQR:function(){if(void 0===$("#autopincode").val())return!1;var e=$("#autopincode").val();""!=e&&($.ajax({url:"/ajax/consumer/addpoints",method:"POST",data:{pincode:e}}).done(function(e){var t="Incorrecto",a="#addPoints_connection";if(void 0!==e.exception){switch(e.exception.code){case"ILPI40022":a="#addPoints_duplicate";break;case"ILPI20020":a="#addPoints_unexist";break;case 401:a="#loginRegistroNew"}$("[id='exception_message']").each(function(t){$(this).text(e.exception.message)}),$("[id='exception_code']").each(function(t){$(this).text(e.exception.code)}),document.cookie.includes("TC_OPTOUT")&&(Utils.openModal(a),"#loginRegistroNew"===a&&showModalLogin())}else void 0!==e.pointsTotalConsumer&&(site.isLogged.pointsAvailable=e.pointsTotalConsumer),t="correcto",a="#addPoints_ok_logged",document.getElementById("points_pincode").innerText=e.pointsTotal,document.getElementById("points_consumer").innerText=site.isLogged.pointsAvailable,document.getElementById("message").innerText="",null!==e.messageTXT&&(document.getElementById("message").innerText=e.messageTXT),Utils.openModal(a);dataLayer.push({event:"sumar_pincode",event_category:"Introducción de pincode",event_action:"Envío",event_label:t,"tamaño":""})}),$("#autopincode").val(""))},addPincode:function(e){var t=$(e).parent().find(".pincode-input");void 0===site.isLogged.status?(etiquetado("userManagement","login","acceso","sumar_puntos"),showModalLogin(),$("#loginFormulario .btn-sendform").attr("data-pincode",$(t).val())):"undefined"==$(t).val()||10!=$(t).val().length?($(t).addClass("errorField"),(url.indexOf("como-funciona-programa")>-1||url.indexOf("com-funciona-programa")>-1)&&dataLayer.push({event:"sumar_puntos_programa_puntos",event_category:"Introducción de pincode",event_action:"Envío",event_label:"Incorrecto","tamaño":"grande"})):($(e).attr("disabled",!0),$.ajax({url:"/ajax/consumer/addpoints",method:"POST",data:{pincode:$(t).val()}}).done(function(a){site.loggedPincodeSumarPuntos=void 0,localStorage.setItem("site",JSON.stringify(site)),sessionStorage.removeItem("loggedPincodeSumarPuntos");var o="Incorrecto",i="#addPoints_connection";if(void 0!==a.exception){if($(t).addClass("errorField"),"ILSRV0515"==a.exception.code){i="#popupRascayganaDefault";var n='Oh, oh... No es aquí dónde se introduce el código de la promo "Rasca y gana".',r="Para conseguir tu regalo, introduce el código en la página de la promoción.",s="Ir a la promoción",l="/es/promociones/rascayganacentenario.html";"ca"==language&&(n='Oh, oh... No és aquí on s\'introdueix el codi de la promo "Rasca i guanya".',r="Per aconseguir el teu regal, introdueix el codi a la pàgina de la promoció.",s="Anar a la promoció",l="/ca/promocions/rascaiguanyacentenari.html"),$("#popupRascayganaDefault .modal-title").html(n),$("#popupRascayganaDefault .modal-bottom-txt").html(r),$("#popupRascayganaDefault .button-blue").html(s),$("#popupRascayganaDefault .button-blue").attr("href",l)}else{switch(a.exception.code){case"ILPI40022":i="#addPoints_duplicate";break;case"ILPI20020":i="#addPoints_unexist";break;case 401:i="#loginModal"}document.querySelector(i+" #exception_message").innerText=a.exception.message,document.querySelector(i+" #exception_code").innerText=a.exception.code}Utils.openModal(i)}else void 0!==a.pointsTotalConsumer&&(site.isLogged.pointsAvailable=a.pointsTotalConsumer),o="Correcto",i="#addPoints_ok_logged",document.getElementById("points_pincode").innerText=a.pointsTotal,document.getElementById("points_consumer").innerText=site.isLogged.pointsAvailable,document.getElementById("message").innerText="",null!==a.messageTXT&&(document.getElementById("message").innerText=a.messageTXT),Utils.openModal(i);$(t).val(""),$(e).attr("disabled",!1),url.indexOf("como-funciona-programa")>-1||url.indexOf("com-funciona-programa")>-1?dataLayer.push({event:"sumar_puntos_programa_puntos",event_category:"Introducción de pincode",event_action:"Envío",event_label:o,"tamaño":"grande"}):dataLayer.push({event:"sumar_pincode",event_category:"Introducción de pincode",event_action:"Envío",event_label:o,"tamaño":$(t).data("size")})}))},eventosSelectCustomized:function(){$("ul.select-options li").on("click",function(){var e=$(this).attr("rel");$("#imgContainer div.imgElement").addClass("hide"),$("#"+e+".imgElement").removeClass("hide")})}};var ProductControllerNA=void 0===ProductControllerNA?{}:ProductControllerNA;$(document).ready(function(){$(".catalog-movie-slider img").removeClass("none"),$(".block-1 .blue-box").removeClass("height-bluebox"),$(".block-1 .blue-box .container-wrapper").removeClass("none")}),ProductControllerNA={init:function(){},impressionWuaki:function(e){var t=JSON.parse(atob(e),!0),a={ecommerce:{currencyCode:"eur",impressions:[{name:t.title,id:t.literalODR,price:"0.0",brand:t.brandImage.alt,category:t.productType[0].name,variant:"",position:"0"}]}};dataLayer.push(a)},getDetailIntangible:function(e,t){product=JSON.parse(atob(e),!0);for(var a="",o=0;o<product.productType.length;o++)a+=(""!=a?":":"")+product.productType[o].name;var i={event:"productClick",ecommerce:{click:{actionField:{list:a},products:[{name:product.title,id:product.literalODR,price:product.costODR,brand:product.brandImage.alt,category:a,variant:"",position:0}]}}};dataLayer.push(i);var n={ecommerce:{detail:{actionField:{list:a},products:[{name:product.title,id:product.literalODR,price:product.costODR,brand:product.brandImage.alt,category:a,variant:"",position:t}]}}};dataLayer.push(n),$("#boxIntangibles .figure").attr("src",product.detailImage[0].url.replace("%WIDTH%/%HEIGHT%","original")).attr("alt",product.detailImage[0].alt),$("#boxIntangibles .title").html(product.title),$("#boxIntangibles .points").text(parseInt(product.points)),$("#boxIntangibles .description").html(product.description);var r=product.endDate.split("-");$("#boxIntangibles").find(".valid-until").html(r[2]+"/"+r[1]+"/"+r[0]);var s=window.location.protocol+"//"+window.location.host+"/"+window.location.pathname.split("/")[1]+"/metas_share/D/";$("#boxIntangibles-social-link-fb").attr("href","https://www.facebook.com/sharer/sharer.php?u="+s+product.literalODR),$("#boxIntangibles-social-link-tw").attr("href","https://twitter.com/share?url="+s+product.literalODR+"&hashtags=Danone");var l=location.pathname.slice(1,3),d="es"===l?"¿Lo quieres? Consíguelo con tus Danone.":"Ho vols? Aconsegueix-lo amb els teus Danone.";$("#boxIntangibles-social-link-mail").attr("href","mailto:?subject="+product.title+"&body="+d+"<br/>"+s+product.literalODR);var c=new Date,p=new Date(product.endDate);$("#boxIntangibles #confirm").attr("disabled",c>p||0==product.numODRDisponiblesConsumidor||void 0!=site.isLogged.literalCID&&parseInt(product.points)>parseInt(site.isLogged.pointsAvailable.replace(".","").replace(",","."))),$("#boxIntangibles #confirm").unbind().bind("click",function(){void 0!==site.isLogged.literalCID?(Utils.loader("#boxIntangibles"),$.ajax("/ajax/cart/redeemProductIntangible",{method:"POST",data:{literalODR:product.literalODR}}).done(function(e){if(Utils.loader("#boxIntangibles"),e.exception)$("#boxIntangibles #confirm").attr("disabled",!0);else{var t="";site.isLogged.pointsAvailable=e.pointsAvailable;for(var a=0;a<product.productType.length;a++)t+=(""!=t?":":"")+product.productType[a].name;dataLayer.push({ecommerce:{purchase:{actionField:{id:e.cartNumber,affiliation:"online store",revenue:e.totalPrice,tax:"",shipping:e.shippingPrice,coupon:""},products:[{name:product.title,id:product.literalODR,price:product.costODR,brand:product.brandImage.alt,category:t,variant:"",quantity:1,coupon:""}]}}}),$($("#boxIntangibles .box-social")).insertAfter("#statusPopup #promoErrorCode"),$("#statusPopup").foundation("open"),ProductControllerNA.popUpTag()}})):showModalLogin()}),$("#boxIntangibles").bind("closed.zf.reveal",function(){$("#boxIntangibles #confirm").attr("disabled",!1)}),Utils.loader(),
setTimeout(function(){$("#boxIntangibles").foundation("open"),ProductControllerNA.popUpTag(),Utils.loader()},500)},getCodeWuaki:function(e){"wuaki_alquiler_peliculas_vip_gratis"==e?"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"catalogoManagement",event_category:"catalogo:cine en casa",event_action:"canjear",event_label:"peli de estreno"}):"wuaki_alquiler_peliculas_gratis"==e&&"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"catalogoManagement",event_category:"catalogo:cine en casa",event_action:"canjear",event_label:"peli blockbuster"}),void 0!==site.isLogged.status?(site.loggedWuaki=void 0,localStorage.setItem("site",JSON.stringify(site)),sessionStorage.removeItem("loggedWuaki"),Utils.loader(),$.ajax("/ajax/cart/redeemProductIntangible",{method:"POST",data:{literalODR:e}}).done(function(t){Utils.loader(),t.exception?"wuaki_alquiler_peliculas_vip_gratis"==e?$("#errorPopupEstreno").foundation("open"):"wuaki_alquiler_peliculas_gratis"==e&&$("#errorPopupBlockbuster").foundation("open"):(site.isLogged.pointsAvailable=t.pointsAvailable,"wuaki_alquiler_peliculas_vip_gratis"==e?(dataLayer.push({event:"transaction",ecommerce:{purchase:{actionField:{id:Math.floor(1e5+9e5*Math.random()),affiliation:"Online Store",revenue:0,tax:0,shipping:0},products:[{name:"peli de estreno",id:"wuaki_alquiler_peliculas_vip_gratis",price:0,category:"cine en casa",quantity:1}]}}}),$("#statusPopupEstreno .modal-title").text($("#statusPopupEstreno .modal-title").text().replace("[Nombre]",site.isLogged.attributes.nombre)),$("#statusPopupEstreno").foundation("open")):"wuaki_alquiler_peliculas_gratis"==e&&(dataLayer.push({event:"transaction",ecommerce:{purchase:{actionField:{id:Math.floor(1e5+9e5*Math.random()),affiliation:"Online Store",revenue:0,tax:0,shipping:0},products:[{name:"peli blockbuster",id:"wuaki_alquiler_peliculas_gratis",price:0,category:"cine en casa",quantity:1}]}}}),$("#statusPopupBlockbuster .modal-title").text($("#statusPopupBlockbuster .modal-title").text().replace("[Nombre]",site.isLogged.attributes.nombre)),$("#statusPopupBlockbuster").foundation("open")))})):(showModalLogin(),$("#loginFormulario .btn-sendform").attr("data-wuaki",e))},clicksWuaki:function(){$(".canjear-blockbuster").click(function(){"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"catalogoManagement",event_category:"catalogo:cine en casa",event_action:"canjear peli",event_label:"peli blockbuster"}),dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:"Cine en casa"},products:[{name:"peli blockbuster"}]}},eventCallback:function(){}}),$("#confirmPopupBlockbuster").foundation("open")}),$(".canjear-estreno").click(function(){"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"catalogoManagement",event_category:"catalogo:cine en casa",event_action:"canjear peli",event_label:"peli de estreno"}),dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:"Cine en casa"},products:[{name:"peli de estreno"}]}},eventCallback:function(){}}),$("#confirmPopupEstreno").foundation("open")})},getDetailTangible:function(e,t){for(var a=JSON.parse(atob(e),!0),o="",i=0;i<a.productType.length;i++)o+=(""!=o?":":"")+a.productType[i].name;var n={ecommerce:{detail:{actionField:{list:o},products:[{name:a.title,id:a.literalODR,price:a.costODR,brand:a.brandImage.alt,category:o,variant:"",position:t}]}}};dataLayer.push(n),location.href="/"+a.routeAlias},addBasket:function(e){JSON.parse(atob(e),!0)},popUpTag:function(){var e="no logado",t="",a="",o=location.pathname.slice(1,3);void 0!=site.isLogged.literalCID&&(e="logado",a=site.isLogged.literalCIDEncrypt,void 0!=site.isLogged.attributes.sexo&&(t=site.isLogged.attributes.sexo));var i=window.location.pathname,n=i.replace(".html","").replace("/es","home").replace("/ca","home").replace("-"," "),r=document.title;dataLayer.push({event:"pop-up",pageName:n+"/"+r,auxPageName:n,userStatus:e,brand:product.brandImage.alt,userID:a,gender:t,language:o})}};var ProfileControllerNA=void 0===ProfileControllerNA?{}:ProfileControllerNA;ProfileControllerNA={init:function(){ProfileControllerNA.events(),ProfileControllerNA.calculateCircles(),ProfileControllerNA.canvas("graph1"),ProfileControllerNA.canvas("graph2"),ProfileControllerNA.canvas("graph3"),ProfileControllerNA.pointsHistoryTable(),ProfileControllerNA.couponsHistoryTable(),ProfileControllerNA.ordersHistoryTable(),screen.width>480&&($("#hijos_si")[0].checked=$("#hijos_si_mobile")[0].checked,$("#hijos_no")[0].checked=$("#hijos_no_mobile")[0].checked)},events:function events(){$(".navigation-action").on("click",function(){$(this).toggleClass("active"),$(".header").find(".menu-btn-mobile.burger").toggleClass("hide"),$(".header").find("#back-menu-mobile").toggleClass("hide"),$(this).parents(".navigation-mobile").toggleClass("navigationResponsiveMobileHide");var e=$(this).attr("href");$(e).children("div").toggleClass("navigationResponsiveMobileShow"),$(".l-profile-header").toggleClass("navigationResponsiveMobileHide")}),$(".pages-profile input, .pages-profile select").on("focusout",function(){var e=Utils.validateFieldForm(this);if(e&&"apellido_1"===this.name&&$('#boxPersonalModal input[name="apellido_2"]').prop("disabled",!1),e||"apellido_1"!==this.name||$('#boxPersonalModal input[name="apellido_2"]').val("").prop("disabled",!0),"apellido_2"===this.name){""===$('#boxPersonalModal input[name="apellido_1"]').val()?(this.value="",this.disabled=!0):this.disabled=!1}}),$(document).on("closed.zf.reveal",".formFamilyAdd",function(){document.querySelector(".formFamilyAdd form").reset()}),$('.formFamilyAdd input[name="nombre"]').on("change",function(){if("hijo"===document.querySelector('.formFamilyAdd select[name="relation"] option:checked').value)for(var e=0;e<family.members.length;e++)if("hijo"===family.members[e].relation&&family.members[e].nombre.toLowerCase()===this.value.toLowerCase()){this.parentNode.parentNode.classList.add("errorFieldset"),this.addEventListener("click",function(){this.parentNode.parentNode.classList.remove("errorFieldset")});var t=this.parentNode.parentNode.nextElementSibling;if(t.classList.contains("warnings")){var a="";switch(language){case"es":a="<p>No se puede repetir el nombre.</p>";break;case"ca":a="<p>No es pot repetir el nom.</p>";break;case"pt":a="<p>O nome da criança não pode ser repetido.</p>"}t.innerHTML=a}}}),$('.formFamilyEdit input[name="nombre"]').on("change",function(){if("hijo"===document.querySelector('.formFamilyEdit select[name="relation"] option:checked').value)for(var e=0;e<family.members.length;e++)if("hijo"===family.members[e].relation&&family.members[e].nombre.toLowerCase()===this.value.toLowerCase()){this.parentNode.parentNode.classList.add("errorFieldset"),this.addEventListener("click",function(){this.parentNode.parentNode.classList.remove("errorFieldset")});var t=this.parentNode.parentNode.nextElementSibling;if(t.classList.contains("warnings")){var a="";switch(language){case"es":a="<p>No se puede repetir el nombre.</p>";break;case"ca":a="<p>No es pot repetir el nom.</p>";break;case"pt":a="<p>O nome da criança não pode ser repetido.</p>"}t.innerHTML=a}}}),$('#haveChildrenModal input[name="nombre[]"]').on("blur",function(){for(var e=[],t=document.querySelectorAll('#haveChildrenModal input[name="nombre[]"]'),a=0;a<t.length;a++)if(""!=t[a].value)if(-1===e.indexOf(t[a].value.toLowerCase()))e.push(t[a].value.toLowerCase());else{t[a].parentNode.parentNode.classList.add("errorFieldset"),t[a].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("errorFieldset")});var o=this.parentNode.parentNode.nextElementSibling;if(o.classList.contains("warnings")){var i="";switch(language){case"es":i="<p>No se puede repetir el nombre.</p>";break;case"ca":i="<p>No es pot repetir el nom.</p>";break;case"pt":i="<p>O nome da criança não pode ser repetido.</p>"}o.innerHTML=i}}}),$('.formFamilyAdd select[name="relation"]').on("change",function(){var date=new Date,Y=date.getFullYear(),d=date.getDate()<9?"0"+date.getDate():date.getDate(),m=date.getMonth()<9?"0"+(date.getMonth()+1):date.getMonth()+1;if("hijo"===$(this).val()){date.setTime(date.getTime()-1728e5),Y=date.getFullYear(),d=date.getDate()<9?"0"+date.getDate():date.getDate(),m=date.getMonth()<9?"0"+(date.getMonth()+1):date.getMonth()+1,$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("min",family.minDateChildrensConsumer),$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("max",d+"/"+m+"/"+Y);var patterns=$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns");$('.formFamilyAdd input[name="fecha_nacimiento"]').data("patternsOri",$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns")),patterns=eval("("+patterns+")"),patterns.min=$('.formFamilyAdd input[name="fecha_nacimiento"]').data("min_child"),patterns.max=$('.formFamilyAdd input[name="fecha_nacimiento"]').data("max_child"),$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns",JSON.stringify(patterns));for(var inputNombre=document.querySelector('.formFamilyAdd input[name="nombre"]'),i=0;i<family.members.length;i++)"hijo"===family.members[i].relation&&family.members[i].nombre.toLowerCase()===inputNombre.value.toLowerCase()&&(inputNombre.parentNode.parentNode.classList.add("errorFieldset"),inputNombre.addEventListener("click",function(){inputNombre.parentNode.parentNode.classList.remove("errorFieldset")}))}else if("madre"===$(this).val()||"padre"===$(this).val()){$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("max",family.maxDateParentsConsumer);var patterns=$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns");$('.formFamilyAdd input[name="fecha_nacimiento"]').data("patternsOri",$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns")),patterns=eval("("+patterns+")"),patterns.max=$('.formFamilyAdd input[name="fecha_nacimiento"]').data("max_parents"),$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns",JSON.stringify(patterns))}else $('.formFamilyAdd input[name="fecha_nacimiento"]').attr("min","01/01/"+(Y-120)),$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("max",d+"/"+m+"/"+(Y-18)),$('.formFamilyAdd input[name="fecha_nacimiento"]').attr("patterns",$('.formFamilyAdd input[name="fecha_nacimiento"]').data("patternsOri"))}),$(document).on("open.zf.reveal","#boxFamilyModal",function(){var date=new Date,Y=date.getFullYear(),d=date.getDate()<9?"0"+date.getDate():date.getDate(),m=date.getMonth()<9?"0"+(date.getMonth()+1):date.getMonth()+1;if("hijo"===$('.formFamilyEdit select[name="relation"]').val()){date.setTime(date.getTime()-1728e5),Y=date.getFullYear(),d=date.getDate()<9?"0"+date.getDate():date.getDate(),m=date.getMonth()<9?"0"+(date.getMonth()+1):date.getMonth()+1,$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("min",family.minDateChildrensConsumer),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("max",d+"/"+m+"/"+Y);var patterns=$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns");$('.formFamilyEdit input[name="fecha_nacimiento"]').data("patternsOri",$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns")),patterns=eval("("+patterns+")"),patterns.min=$('.formFamilyEdit input[name="fecha_nacimiento"]').data("min_child"),patterns.max=$('.formFamilyEdit input[name="fecha_nacimiento"]').data("max_child"),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns",JSON.stringify(patterns))}else if("madre"===$(this).val()||"padre"===$(this).val()){$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("max",family.maxDateParentsConsumer);var patterns=$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns");$('.formFamilyEdit input[name="fecha_nacimiento"]').data("patternsOri",$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns")),patterns=eval("("+patterns+")"),patterns.max=$('.formFamilyEdit input[name="fecha_nacimiento"]').data("max_parents"),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns",JSON.stringify(patterns))}else $('.formFamilyEdit input[name="fecha_nacimiento"]').attr("min","01/01/"+(Y-120)),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("max",d+"/"+m+"/"+(Y-18)),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns",$('.formFamilyEdit input[name="fecha_nacimiento"]').data("patternsOri"))}),$('#boxSendModal select[name="provincia"], #boxSendModal input[name="codigo_postal"]').on("blur",function(){var e=document.querySelectorAll('#boxSendModal select[name="provincia"]')[0],t=e.querySelectorAll("option:checked")[0].getAttribute("data-cp"),a=document.querySelectorAll('#boxSendModal input[name="codigo_postal"]')[0].value;""!==t&&t!==a.slice(0,2)?e.parentNode.parentNode.classList.add("errorFieldset"):e.parentNode.parentNode.classList.remove("errorFieldset")});var select=document.querySelectorAll('#boxSendModal select[name="provincia"]')[0],cp=select.querySelectorAll("option:checked")[0].getAttribute("data-cp"),cpSelected=document.querySelectorAll('#boxSendModal input[name="codigo_postal"]')[0].value;""!==cp&&cp!==cpSelected.slice(0,2)?select.parentNode.parentNode.classList.add("errorFieldset"):select.parentNode.parentNode.classList.remove("errorFieldset"),$('body.pages-profile .formFamilyAdd select[name="relation"]').on("change",function(){var e=$(".formFamilyAdd select.gender3-arrow");"madre"===this.value||"padre"===this.value?(e.prop("required",!1),e.parent().parent().addClass("hide")):(e.prop("required",!0),e.parent().parent().removeClass("hide"))}),$("body.pages-profile #toggleFamily").on("click",function(){$($(this).find("span")[0]).toggleClass("hide"),$($(this).find("span")[1]).toggleClass("hide"),$("body.pages-profile ul.familyMemberJS").toggleClass("hide"),$($("body.pages-profile ul.familyMemberJS")[0]).removeClass("hide"),$($("body.pages-profile ul.familyMemberJS")[1]).removeClass("hide"),$($("body.pages-profile ul.familyMemberJS")[2]).removeClass("hide")}),$('input[name="num_via"],input[name="piso"]').on("blur",function(){$(this).parent().parent().hasClass("errorFieldset")?($("#boxSendModal #num_piso_puerta").addClass("active"),$("#box-sendEdit #num_piso_puerta").addClass("active")):($("#boxSendModal #num_piso_puerta").removeClass("active"),$("#box-sendEdit #num_piso_puerta").removeClass("active"))})},consumerUpdateModal:function(e,t){var a=Utils.validateForm(e);a.errors.count||(Utils.loader(),$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:a.success.params}).done(function(e){"ok"===e.status&&$(t).foundation("close"),Utils.loader()}))},calculateCircles:function(){var e=parseFloat(site.isLogged.registrationPercentage),t=0;t=site.isLogged.pointsExpired.indexOf(",")?parseFloat(site.isLogged.pointsExpired.replace(".","").replace(",",".")):parseFloat(site.isLogged.pointsExpired);var a=0;a=site.isLogged.pointsAvailable.indexOf(",")?parseFloat(site.isLogged.pointsAvailable.replace(".","").replace(",",".")):parseFloat(site.isLogged.pointsAvailable);var o={};switch(o.points=a>=200?100:parseFloat(a/200*100),o.expires=parseFloat(t/a*100),o.completed=parseFloat(e),o.points){case 0:document.getElementById("graph1").attributes["data-percent"].value="99.9";break;case 100:document.getElementById("graph1").attributes["data-percent"].value="0.01";break;default:document.getElementById("graph1").attributes["data-percent"].value=100-o.points}switch(o.expires){case 0:document.getElementById("graph2").attributes["data-percent"].value="99.9";break;case 100:document.getElementById("graph2").attributes["data-percent"].value="0.01";break;default:document.getElementById("graph2").attributes["data-percent"].value=100-o.expires}0===o.completed?document.getElementById("graph3").attributes["data-percent"].value="99.9":o.completed>100?document.getElementById("graph3").attributes["data-percent"].value="0.01":document.getElementById("graph3").attributes["data-percent"].value=100-o.completed},canvas:function(e){var t=document.getElementById(e);t.childNodes.length&&t.childNodes[0].remove();var a={percent:t.getAttribute("data-percent")||25,size:t.getAttribute("data-size")||150,lineWidth:t.getAttribute("data-line")||15,rotate:t.getAttribute("data-rotate")||0,text:t.getAttribute("data-text")||"",content:t.getAttribute("data-content")||""},o=document.createElement("canvas"),i=document.createElement("div"),n=document.createElement("h5");n.textContent=a.text;var r=document.createElement("span");r.textContent=a.content,"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(o);var s=o.getContext("2d");o.width=o.height=a.size;var l=s.createLinearGradient(0,0,0,100);l.addColorStop(0,"#4d71b5"),l.addColorStop(.2,"#63a7e5"),l.addColorStop(.25,"#69b2f0"),l.addColorStop(.5,"#4d70b3"),l.addColorStop(.75,"#33327b"),l.addColorStop(1,"#1a1945"),t.appendChild(o),t.appendChild(i),i.appendChild(n),i.appendChild(r),s.translate(a.size/2,a.size/2),s.rotate((a.rotate/180-.5)*Math.PI);var d=(a.size-a.lineWidth)/2,c=function(e,t,a){a=Math.min(Math.max(0,a||1),1),s.beginPath(),s.arc(0,0,d,0,2*Math.PI*a,!0),s.strokeStyle=e,s.lineCap="round",s.lineWidth=t,s.stroke()};c("#eee",a.lineWidth,1),c(l,a.lineWidth,a.percent/100)},setAttributesMember:function setAttributesMember(relation){var setData=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,index=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,params={};switch(relation){case"madre":case"padre":null!==setData?(eval("params.miembro_hogar_nombre"+relation+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+" = setData.fecha_nacimiento")):(eval("params.miembro_hogar_nombre"+relation+" = null"),eval("params.miembro_hogar_fecha_nac_"+relation+" = null"));break;case"pareja":null!==setData?(eval("params.miembro_hogar_sexo"+relation+" = setData.sexo"),eval("params.miembro_hogar_nombre"+relation+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+" = setData.fecha_nacimiento")):(eval("params.miembro_hogar_sexo"+relation+" = null"),eval("params.miembro_hogar_nombre"+relation+" = null"),eval("params.miembro_hogar_fecha_nac_"+relation+" = null"));break;case"otro":null!==setData?(eval("params.sexo_"+relation+"_fam_hogar = setData.sexo"),eval("params.miembro_hogar_nombre"+relation+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+" = setData.fecha_nacimiento")):(eval("params.sexo_"+relation+"_fam_hogar = null"),eval("params.miembro_hogar_nombre"+relation+" = null"),eval("params.miembro_hogar_fecha_nac_"+relation+" = null"));break;case"hijo":if(null!==setData)if(null!=index)eval("params.miembro_hogar_sexo"+relation+index+" = setData.sexo"),eval("params.miembro_hogar_nombre"+relation+index+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+index+" = setData.fecha_nacimiento");else{for(var setted=!1,hijos=1,i=1;i<=8;i++)!setted&&eval("site.isLogged.attributes.miembro_hogar_nombre"+relation+i+" == null")?(setted=!0,eval("params.miembro_hogar_sexo"+relation+i+" = setData.sexo"),eval("params.miembro_hogar_nombre"+relation+i+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+i+" = setData.fecha_nacimiento")):(eval("params.miembro_hogar_sexo"+relation+i+" = site.isLogged.attributes.miembro_hogar_sexo"+relation+i),eval("params.miembro_hogar_nombre"+relation+i+" = site.isLogged.attributes.miembro_hogar_nombre"+relation+i),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+i+" = site.isLogged.attributes.miembro_hogar_fecha_nac_"+relation+"_"+i)),eval("site.isLogged.attributes.miembro_hogar_nombre"+relation+i+" !== null")&&hijos++;params.hijos="si",family.childrens=hijos}else eval("params.miembro_hogar_sexo"+relation+index+" = null"),eval("params.miembro_hogar_nombre"+relation+index+" = null"),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+index+" = null"),family.childrens=family.childrens>0?family.childrens-1:0,params.hijos=0===family.childrens?"no":"si";break;case"hermano":if(null!==setData)if(null!=index)eval("params.miembro_hogar_sexo"+relation+index+" = setData.sexo"),eval("params.miembro_hogar_nombre"+relation+index+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+index+" = setData.fecha_nacimiento");else for(var setted=!1,i=1;i<=8;i++)!setted&&eval("site.isLogged.attributes.miembro_hogar_nombre"+relation+i+" == null")?(setted=!0,eval("params.miembro_hogar_sexo"+relation+i+" = setData.sexo"),eval("params.miembro_hogar_nombre"+relation+i+" = setData.nombre"),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+i+" = setData.fecha_nacimiento")):(eval("params.miembro_hogar_sexo"+relation+i+" = site.isLogged.attributes.miembro_hogar_sexo"+relation+i),eval("params.miembro_hogar_nombre"+relation+i+" = site.isLogged.attributes.miembro_hogar_nombre"+relation+i),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+i+" = site.isLogged.attributes.miembro_hogar_fecha_nac_"+relation+"_"+i));else eval("params.miembro_hogar_sexo"+relation+index+" = null"),eval("params.miembro_hogar_nombre"+relation+index+" = null"),eval("params.miembro_hogar_fecha_nac_"+relation+"_"+index+" = null"),family.brothers=family.brothers>0?family.brothers-1:0}return params},confirmRemoveChilds:function confirmRemoveChilds(){var attributes={};attributes.hijos="no",family.childrens="0";for(var i=1;i<=8;i++)eval("attributes.miembro_hogar_sexohijo"+i+"= null"),eval("attributes.miembro_hogar_nombrehijo"+i+"= null"),eval("attributes.miembro_hogar_fecha_nac_hijo_"+i+"= null");Utils.loader(),$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:attributes}).done(function(e){"ok"===e.status?(window.location.reload(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"eliminar todos hijos",event_label:"datos modificados"})):(dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"eliminar todos hijos",event_label:"error:"+e.exception.code}),Utils.loader())})},removeFamilyMember:function(e){if(void 0!==family.members[e]){var t={};t=ProfileControllerNA.setAttributesMember(family.members[e].relation,null,family.members[e].index),Utils.loader(),$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:t}).done(function(a){if("ok"===a.status){$(".member_"+e).remove();for(var o=Object.keys(t),i=Object.values(t),n=0;n<o.length;n++)site.isLogged.attributes[o[n]]=i[n];delete family.members[e],family.hijos=site.isLogged.attributes.hijos=family.childrens?"si":"no",$("#toggleFamily").trigger("click").trigger("click"),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"eliminar familiar",event_label:"datos modificados"}),location.reload()}else dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"eliminar familiar",event_label:"error:"+a.exception.code});Utils.loader()})}else $(".member_"+e).remove(),event.stopImmediatePropagation()},editFamilyMember:function editFamilyMember(index){$(".formFamilyEdit input[name=index]").val(family.members[index].index),$(".formFamilyEdit input[name=indexMember]").val(index),$(".formFamilyEdit select[name=relation]").val(family.members[index].relation),$(".formFamilyEdit input[name=nombre]").val(family.members[index].nombre),$(".formFamilyEdit input[name=fecha_nacimiento]").val(family.members[index].fecha_nacimiento),"madre"==family.members[index].relation||"padre"==family.members[index].relation?$(".formFamilyEdit [name=sexo]").parent().parent().hide():$(".formFamilyEdit [name=sexo]").val(family.members[index].sexo).parent().parent().show(),$("#boxFamilyModal").foundation("open");var date=new Date,Y=date.getFullYear(),d=date.getDate()<9?"0"+date.getDate():date.getDate(),m=date.getMonth()<9?"0"+(date.getMonth()+1):date.getMonth()+1;if("hijo"===family.members[index].relation)$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("min",family.minDateChildrensConsumer),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("max",d-2+"/"+m+"/"+Y);else if("madre"===family.members[index].relation||"padre"===family.members[index].relation){$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("max",family.maxDateParentsConsumer);var patterns=$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns");$('.formFamilyEdit input[name="fecha_nacimiento"]').data("patternsOri",$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns")),patterns=eval("("+patterns+")"),patterns.max=$('.formFamilyEdit input[name="fecha_nacimiento"]').data("max_parents"),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("patterns",JSON.stringify(patterns))}else $('.formFamilyEdit input[name="fecha_nacimiento"]').attr("min","01/01/"+(Y-120)),$('.formFamilyEdit input[name="fecha_nacimiento"]').attr("max",d+"/"+m+"/"+(Y-18))},addChildInHaveChildrenModal:function(){if($("#haveChildrenModal form div.form-child-added").length<8){var e=document.getElementById("addChildClone").cloneNode(!0).innerHTML;e=e.replace(/%indexArrayFamily%/g,family.members.length),$("#haveChildrenModal form .add-more-child-link").before(e),ProfileControllerNA.events()}},addChildLinkOnClick:function(){document.getElementById("add_child_save_button").style.display="block",document.getElementById("add_child_link").innerHTML="es"==language?"Añadir más hijos":"Afegir més fills",document.getElementById("add_child_link").classList.remove("add-child-link"),document.getElementById("add_child_link").classList.add("add-more-child-link"),ProfileControllerNA.addChildInHaveChildrenModal()},submitFormPersonal:function(e){Utils.loader();var t=Utils.validateForm(e);void 0!==t.errors.params.apellido_1&&($("#boxPersonalModal #surnames").addClass("active"),$("#boxPersonalModal input[name=apellido_1]").parent().parent().unbind().bind("click",function(){$("#boxPersonalModal #surnames").removeClass("active"),$(this).removeClass("errorFieldset")})),t.errors.count?Utils.loader():$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:t.success.params}).done(function(e){"ok"===e.status?(document.location.reload(),$("#boxPersonalModal").foundation("close"),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"datos personales",event_label:"datos modificados"})):(Utils.loader(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"datos personales",event_label:"error:"+e.exception.code}),"ILREG0351"===e.exception.code&&($('input[name="email"]').parent().parent().addClass("errorFieldset"),$("#boxPersonalModal [data-exist]").text($("#boxPersonalModal [data-exist]").data("exist"))),"ILREG0355"===e.exception.code&&($('input[name="email"]').parent().parent().addClass("errorFieldset"),$("#boxPersonalModal [data-invalid]").text($("#boxPersonalModal [data-invalid]").data("invalid"))))})},submitFormSend:function(e){Utils.loader();var t=Utils.validateForm(e);t.errors.count?Utils.loader():$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:t.success.params}).done(function(e){"ok"===e.status?(document.location.reload(),$("#boxSendModal").foundation("close"),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"datos envio",event_label:"datos modificados"})):(Utils.loader(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"datos envio",event_label:"error:"+e.exception.code}))})},submitFormComunication:function(e){Utils.loader();var t=Utils.validateForm(e);if(t.errors.count)Utils.loader();else{var a=Object.keys(t.success.params).indexOf("no_cesion_terceros");t.success.params.no_cesion_terceros=-1!=a&&t.success.fields[a].prop("checked")?"Si":"No",$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:t.success.params}).done(function(e){"ok"===e.status?(site.isLogged.attributes.publicidad_GDPR=t.success.params.publicidad_GDPR,site.isLogged.attributes.idioma_comunicaciones=t.success.params.idioma_comunicaciones,site.isLogged.attributes.no_cesion_terceros=t.success.params.no_cesion_terceros,dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"preferencias comunicacion",event_label:"recibir comunicaciones:"+site.isLogged.attributes.publicidad_GDPR+",idioma comunicaciones:"+site.isLogged.attributes.idioma_comunicaciones+",cesion_terceros:"+site.isLogged.attributes.no_cesion_terceros})):dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"preferencias comunicacion",event_label:"error:"+e.exception.code}),Utils.loader()})}},submitFormPassword:function(e){Utils.loader();var t=Utils.validateForm(e);t.errors.count?Utils.loader():t.success.params.password_repeat===t.success.params.password?$.ajax({url:"/ajax/consumer/changePassword",method:"POST",data:t.success.params}).done(function(t){"ok"===t.status?(e.reset(),Utils.openModal("#passwordOk"),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"cambiar password",event_label:"password cambiada"})):("ILREG0299"===t.exception.code?(Utils.openModal("#passwordBadLength"),$("#boxPasswordModal input[name=password]").parent().addClass("errorFieldset"),$("#boxPasswordModal input[name=password_repeat]").parent().addClass("errorFieldset")):"ILREG0301"===t.exception.code?(Utils.openModal("#passwordSamePrevious"),$("#boxPasswordModal input[name=password]").parent().addClass("errorFieldset"),$("#boxPasswordModal input[name=password_repeat]").parent().addClass("errorFieldset")):$("#boxPasswordModal input[name=password_old]").parent().addClass("errorFieldset"),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"cambiar password",event_label:"error:"+t.exception.code})),Utils.loader()}):(Utils.loader(),Utils.openModal("#passwordDifferent"),$("#boxPasswordModal input[name=password]").parent().addClass("errorFieldset"),$("#boxPasswordModal input[name=password_repeat]").parent().addClass("errorFieldset"))},submitFormFamily:function(e){var t=Utils.validateForm(e);if(!t.errors.count){var a={},o=void 0!==t.success.params.index?t.success.params.index:null;a=ProfileControllerNA.setAttributesMember(t.success.params.relation,t.success.params,o),Utils.loader(),$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:a}).done(function(e){if("ok"===e.status)if(null==o)window.location.reload(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"anadir familiar",event_label:"datos modificados"});else{var i=$(".member_"+t.success.params.indexMember+" li:not(.first) span");$(i[0]).text(t.success.params.nombre),$(i[1]).text(t.success.params.fecha_nacimiento.replace(/(\d{4})-(\d{2})-(\d{2})/,"$3/$2/$1")),$(i[2]).text(t.success.params.sexo),"hijo"==t.success.params.relation&&($(".member_"+t.success.params.indexMember+" select.sexoJS").val(t.success.params.sexo),$(".member_"+t.success.params.indexMember+" input.nombreJS").val(t.success.params.nombre),$(".member_"+t.success.params.indexMember+" input.fechaJS").val(t.success.params.fecha_nacimiento));for(var n=Object.keys(a),r=Object.values(a),s=0;s<n.length;s++)site.isLogged.attributes[n[s]]=r[s];family.members[t.success.params.indexMember].sexo=t.success.params.sexo,family.members[t.success.params.indexMember].nombre=t.success.params.nombre,family.members[t.success.params.indexMember].fecha_nacimiento=t.success.params.fecha_nacimiento,$("#boxFamilyModal").foundation("close"),Utils.loader(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"editar familiar",event_label:"datos modificados"})}else{Utils.loader();var l="anadir familiar";null!=o&&(l="editar familiar"),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:l,event_label:"error:"+e.exception.code})}})}},submitFormFamilyChildrens:function submitFormFamilyChildrens(form){var formValidated=Utils.validateForm(form);if(!formValidated.errors.count&&formValidated.success.count>0){for(var params={},i=0;i<8;i++){
var sexo=formValidated.success.params.sexo[i],nombre=formValidated.success.params.nombre[i],fecha_nacimiento=formValidated.success.params.fecha_nacimiento[i];eval("params.miembro_hogar_sexohijo"+parseInt(i+1)+" = sexo"),eval("params.miembro_hogar_nombrehijo"+parseInt(i+1)+" = nombre"),eval("params.miembro_hogar_fecha_nac_hijo_"+parseInt(i+1)+" = fecha_nacimiento")}params.hijos="si",Utils.loader(),$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:params}).done(function(e){"ok"===e.status?(window.location.reload(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"anadir hijo",event_label:"datos modificados"})):(Utils.loader(),dataLayer.push({event:"modificar_datos",event_category:"autogestion",event_action:"anadir hijo",event_label:"error:"+e.exception.code}))})}},pointsHistoryTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.ajax({url:"/ajax/consumer/consumerHistoric",method:"POST",data:{page:e}}).done(function(t){if("ok"===t.status){for(var a="",o=0;o<t.consumerPointsTotalList.length;o++)a+='\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>%pointsDate%</td>\n\t\t\t\t\t\t\t<td class="show-for-large">%expirationDate%</td>\n\t\t\t\t\t\t\t<td class="text-desc">%description%\n\t\t\t\t\t\t\t\t<span class="innerspan hide-for-large">\n\t\t\t\t\t\t\t\t\t%caducidad%: %expirationDate%\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>%points%</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%caducidad%/g,"es"==language?"Caducidad":"Caducitat"),a=a.replace(/%pointsDate%/g,t.consumerPointsTotalList[o].pointsDate),a=a.replace(/%expirationDate%/g,t.consumerPointsTotalList[o].expirationDate),a=a.replace(/%description%/g,t.consumerPointsTotalList[o].description),a=a.replace(/%points%/g,t.consumerPointsTotalList[o].points);if($("#table_points tbody").html(a),$("#pointsHistoryTableEmpty").addClass("hide"),$("#table_points").removeClass("hide"),Math.round(parseInt(t.consumerPointsTotalListCount)/4)>1){for(var i="",n=!1,r=!1,s=Math.round(parseInt(t.consumerPointsTotalListCount)/4),l=e+2<Math.round(parseInt(t.consumerPointsTotalListCount)/4)?e+2:Math.round(parseInt(t.consumerPointsTotalListCount)/4),d=e>=6?e:1;d<=l;d++)!n&&e>=6&&(n=!0,i+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.pointsHistoryTable(1)">1</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',i+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.pointsHistoryTable(%page-2%)">%page-2%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.pointsHistoryTable(%page-1%)">%page-1%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',i=i.replace(/%page-1%/g,e-1),i=i.replace(/%page-2%/g,e-2)),i+='\n\t\t\t\t\t\t\t<li class="%active%">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.pointsHistoryTable(%page%)">%page%</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t',i=i.replace(/%active%/g,d==e?"active":""),i=i.replace(/%page%/g,d),r||l!=d||d===s||(r=!0,i+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.pointsHistoryTable(%lastNumber%)">%lastNumber%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',i=i.replace(/%lastNumber%/g,s));$("#pagination_points ul").html(i),$("#pagination_points").removeClass("hide")}}})},couponsHistoryTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.ajax({url:"/ajax/consumer/consumerOrders",method:"POST",data:{page:e,type:"cupon"}}).done(function(t){if("ok"===t.status){$("#total_coupons").text(t.productosTotales),$("#saving_coupons").text(t.ahorroTotal);for(var a="",o=0;o<t.products.length;o++)a+='\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>%fechaRedencion%</td>\n\t\t\t\t\t\t\t<td>%commerceExpirationDate%</td>\n\t\t\t\t\t\t\t<td class="text-left">\n\t\t\t\t\t\t\t\t<img src="%imageUrl%" witdh="298" height="170" alt="%imageAlt%">\n\t\t\t\t\t\t\t\t<span style="word-break: break-word;overflow: hidden;text-transform: none;height: 2.4em;line-height: 1.2em;word-wrap: break-word;">%descripcion%</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>%discountValue%€</td>\n\t\t\t\t\t\t\t<td>%puntosTotalesRedimidos%</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%fechaRedencion%/g,t.products[o].fechaRedencion),a=a.replace(/%commerceExpirationDate%/g,void 0!==t.products[o].commerceExpirationDate?t.products[o].commerceExpirationDate:""),a=a.replace(/%descripcion%/g,t.products[o].descripcion),a=a.replace(/%discountValue%/g,void 0!==t.products[o].discountValue?t.products[o].discountValue:""),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[o].puntosTotalesRedimidos),a=a.replace(/%imageAlt%/g,void 0!==t.products[o].image?t.products[o].image.alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[o].image?t.products[o].image.url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","298/170");$("#table_coupons tbody.show-for-large").html(a),$("#cuponsHistoryTableEmpty").addClass("hide"),$("#table_coupons").removeClass("hide"),a="";for(var i=0;i<t.products.length;i++)a+='\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class="text-left" width="80%">\n\t\t\t\t\t\t\t\t<img src="%imageUrl%" witdh="298" height="170" alt="%imageAlt%">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t%descripcion%<br/>\n\t\t\t\t\t\t\t\t\t<span class="innerspan">\n\t\t\t\t\t\t\t\t\t\t%profileHistory_print%: %fechaRedencion%<br/>\n\t\t\t\t\t\t\t\t\t\t%profileHistory_validate%: %commerceExpirationDate%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class="data" width="20%">\n\t\t\t\t\t\t\t\t<span class="limiterspan">\n\t\t\t\t\t\t\t\t\t%profileHistory_savingUppercase%:<br/>\n\t\t\t\t\t\t\t\t\t%discountValue%€\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="limiterspan">\n\t\t\t\t\t\t\t\t\t%profileHistory_pointsUppercase%:<br/>\n\t\t\t\t\t\t\t\t\t%puntosTotalesRedimidos%€\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%profileHistory_print%/g,"es"==language?"Impresión":"Impressió"),a=a.replace(/%profileHistory_validate%/g,"es"==language?"Validez en caja":"Vàlid a caixa"),a=a.replace(/%profileHistory_savingUppercase%/g,"es"==language?"AHORRO":"ESTALVI"),a=a.replace(/%profileHistory_pointsUppercase%/g,"es"==language?"PUNTOS":"PUNTS"),a=a.replace(/%fechaRedencion%/g,t.products[i].fechaRedencion),a=a.replace(/%commerceExpirationDate%/g,t.products[i].commerceExpirationDate),a=a.replace(/%descripcion%/g,t.products[i].descripcion),a=a.replace(/%discountValue%/g,t.products[i].discountValue),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[i].puntosTotalesRedimidos),a=a.replace(/%imageAlt%/g,void 0!==t.products[i].image?t.products[i].image.alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[i].image?t.products[i].image.url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","298/170");if($("#table_coupons tbody.hide-for-large").html(a),$("#cuponsHistoryTableEmpty").addClass("hide"),$("#table_coupons").removeClass("hide"),Math.round(parseInt(t.productosTotales)/4)>1){for(var n="",r=!1,s=!1,l=Math.round(parseInt(t.productosTotales)/4),d=e+2<Math.round(parseInt(t.productosTotales)/4)?e+2:Math.round(parseInt(t.productosTotales)/4),c=e>=6?e:1;c<=d;c++)!r&&e>=6&&(r=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.couponsHistoryTable(1)">1</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.couponsHistoryTable(%page-2%)">%page-2%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.couponsHistoryTable(%page-1%)">%page-1%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%page-1%/g,e-1),n=n.replace(/%page-2%/g,e-2)),n+='\n\t\t\t\t\t\t\t<li class="%active%">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.couponsHistoryTable(%page%)">%page%</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t',n=n.replace(/%active%/g,c==e?"active":""),n=n.replace(/%page%/g,c),s||d!=c||c===l||(s=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.couponsHistoryTable(%lastNumber%)">%lastNumber%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%lastNumber%/g,l));$("#pagination_coupons ul").html(n),$("#pagination_coupons").removeClass("hide")}}})},ordersHistoryTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.ajax({url:"/ajax/consumer/consumerOrders",method:"POST",data:{page:e,type:"regalo"}}).done(function(t){if("ok"===t.status){$("#total_orders").text(t.productosTotales),$("#saving_orders").text(t.ahorroTotal);for(var a="",o=0;o<t.products.length;o++)a+='\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>%fechaRedencion%</td>\n\t\t\t\t\t\t\t<td class="text-left">\n\t\t\t\t\t\t\t\t<img src="%imageUrl%" witdh="298" height="170" alt="%imageAlt%">\n\t\t\t\t\t\t\t\t<span>%descripcion%</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>%costeTotal%€</td>\n\t\t\t\t\t\t\t<td>%puntosTotalesRedimidos%</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%fechaRedencion%/g,t.products[o].fechaRedencion),a=a.replace(/%imageAlt%/g,void 0!==t.products[o].detailImage?t.products[o].detailImage[0].alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[o].detailImage?t.products[o].detailImage[0].url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","original"),a=a.replace(/%descripcion%/g,t.products[o].descripcion),a=a.replace(/%costeTotal%/g,t.products[o].costeTotal),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[o].puntosTotalesRedimidos);$("#table_orders tbody.show-for-large").html(a),$("#ordersHistoryTableEmpty").addClass("hide"),$("#table_orders").removeClass("hide"),a="";for(var i=0;i<t.products.length;i++)a+='\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class="text-left" width="80%">\n\t\t\t\t\t\t\t\t<img src="%imageUrl%" witdh="298" height="170" alt="%imageAlt%">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t%descripcion%<br/>\n\t\t\t\t\t\t\t\t\t<span class="innerspan">\n\t\t\t\t\t\t\t\t\t\t%profileHistory_exchange%: %fechaRedencion%\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class="data" width="20%">\n\t\t\t\t\t\t\t\t<span class="limiterspan">\n\t\t\t\t\t\t\t\t\t%profileHistory_priceUppercase%:<br/>\n\t\t\t\t\t\t\t\t\t%costeTotal%€\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="limiterspan">\n\t\t\t\t\t\t\t\t\t%profileHistory_pointsUppercase%:<br/>\n\t\t\t\t\t\t\t\t\t%puntosTotalesRedimidos%\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%imageAlt%/g,void 0!==t.products[i].detailImage?t.products[i].detailImage[0].alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[i].detailImage?t.products[i].detailImage[0].url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","original"),a=a.replace(/%descripcion%/g,t.products[i].descripcion),a=a.replace(/%profileHistory_exchange%/g,"es"==language?"Canjeo":"Bescanvi"),a=a.replace(/%fechaRedencion%/g,t.products[i].fechaRedencion),a=a.replace(/%profileHistory_priceUppercase%/g,"es"==language?"PRECIO":"PREU"),a=a.replace(/%costeTotal%/g,t.products[i].costeTotal),a=a.replace(/%profileHistory_pointsUppercase%/g,"es"==language?"PUNTOS":"PUNTS"),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[i].puntosTotalesRedimidos);if($("#table_orders tbody.hide-for-large").html(a),$("#ordersHistoryTableEmpty").addClass("hide"),$("#table_orders").removeClass("hide"),Math.round(parseInt(t.productosTotales)/4)>1){for(var n="",r=!1,s=!1,l=Math.round(parseInt(t.productosTotales)/4),d=e+2<Math.round(parseInt(t.productosTotales)/4)?e+2:Math.round(parseInt(t.productosTotales)/4),c=e>=6?e:1;c<=d;c++)!r&&e>=6&&(r=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.ordersHistoryTable(1)">1</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.ordersHistoryTable(%page-2%)">%page-2%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.ordersHistoryTable(%page-1%)">%page-1%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%page-1%/g,e-1),n=n.replace(/%page-2%/g,e-2)),n+='\n\t\t\t\t\t\t\t<li class="%active%">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.ordersHistoryTable(%page%)">%page%</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t',n=n.replace(/%active%/g,c==e?"active":""),n=n.replace(/%page%/g,c),s||d!=c||c===l||(s=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="ProfileControllerNA.ordersHistoryTable(%lastNumber%)">%lastNumber%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%lastNumber%/g,l));$("#pagination_orders ul").html(n),$("#pagination_orders").removeClass("hide")}}})}};var PromoControllerNA=void 0===PromoControllerNA?{}:PromoControllerNA;PromoControllerNA={init:function(){try{var e=localStorage.getItem("site");null!==e&&(e=JSON.parse(e),site.statusL=void 0===e.statusL?{}:e.statusL,void 0!==site.isLogged.status&&(site.statusL[site.isLogged.externalConsumerId+"_"+site.pageInfo.nid]&&($("#date-legal-checkbox").prop("checked",!0),$("#date-legal-checkbox-mobile").prop("checked",!0),$(".promotions-draw-date-btn").prop("disabled",!1)),1==site.loggedToOpenPromo&&PromoControllerNA.openPromo("participar_boton")))}catch(e){}},pushDataLayer:function(e){var t=document.location.pathname.split("/")[3].replace(".html","");switch(e){case"legal":dataLayer.push({event:"promo",event_category:"promos",event_action:t,event_label:"bases legales"});break;case"participar_boton":if(1!=site.loggedToOpenPromo){var a=$("span.mpoints:first").text();site.isLogged.pointsAvailable&&parseInt(site.isLogged.pointsAvailable.replace(".",""))>=parseInt(a)?dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_participar_con_login_con_puntos"}):dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_participar_con_login_sin_puntos"})}break;case"participar_banner":if(1!=site.loggedToOpenPromo){var a=$("span.mpoints:first").text();site.isLogged.pointsAvailable&&parseInt(site.isLogged.pointsAvailable.replace(".",""))>=parseInt(a)?dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_banner_con_login_con_puntos"}):dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_banner_con_login_sin_puntos"})}}},labelLegal:function(){"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_bases_legales"})},checkLegal:function(e){$(e).prop("checked")?($(".promotions-draw-date-btn").prop("disabled",!1),void 0!==site.isLogged.status&&(site.statusL=void 0===site.statusL?{}:site.statusL,site.statusL[site.isLogged.externalConsumerId+"_"+site.pageInfo.nid]=site.pageInfo.endDate,localStorage.setItem("site",JSON.stringify(site)))):($(".promotions-draw-date-btn").prop("disabled",!0),void 0!==site.isLogged.status&&(delete site.statusL[site.isLogged.externalConsumerId+"_"+site.pageInfo.nid],localStorage.setItem("site",JSON.stringify(site))))},changePage:function(e,t){if($(e).hasClass("active"))return!1;Utils.loader(".footer"),$.ajax({url:"/ajax/instantWin/winnerList",method:"POST",data:{page:t,nid:site.pageInfo.nid,instantWins:site.pageInfo.instantWins}}).done(function(t){Utils.loader(".footer"),$(e).addClass("active").siblings().removeClass("active"),$(e).parent().parent().find(".user-winner").remove();for(var a="",o=0;o<t.winnerListPaged.length;o++){a+='<div class="user-winner medium-6 large-3 promotions-draw-download-users-user">\n\t\t\t\t\t\t\t<div class="promotions-draw-download-users-user">\n\t\t\t\t\t\t\t\t<div class="promotions-draw-download-users-user-logo" style="background-color: %randomColor%">\n\t\t\t\t\t\t\t\t\t<span>%nombre_1%</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="promotions-draw-download-users-user-info">\n\t\t\t\t\t\t\t\t\t<div class="promotions-draw-download-users-user-info-name">\n\t\t\t\t\t\t\t\t\t\t%nombre_2% %apellido_1%.\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="promotions-draw-download-users-user-info-date">\n\t\t\t\t\t\t\t\t\t\t%instantWinDate%\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="promotions-draw-download-users-user-info-prize">\n\t\t\t\t\t\t\t\t\t\t%award%\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>',a=a.replace("%award%",t.winnerListPaged[o].award),a=a.replace("%nombre_1%",null!==t.winnerListPaged[o].nombre?t.winnerListPaged[o].nombre.slice(0,1).toUpperCase():""),a=a.replace("%nombre_2%",t.winnerListPaged[o].nombre),a=a.replace("%apellido_1%",null!==t.winnerListPaged[o].apellido_1?t.winnerListPaged[o].apellido_1.slice(0,1).toUpperCase():null),a=a.replace("%instantWinDate%",t.winnerListPaged[o].instantWinDate);var i=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),r=Math.floor(256*Math.random()),s="rgb("+i+","+n+","+r+")";a=a.replace("%randomColor%",s)}$(a).insertBefore($(e).parent())})},openPromo:function(e){void 0!==site.isLogged.status?(void 0!==site.statusL&&site.statusL[site.isLogged.externalConsumerId+"_"+site.pageInfo.nid]||1==site.loggedToOpenPromo)&&(site.pageInfo.active&&(PromoControllerNA.pushDataLayer(e),void 0!==site.isLogged.literalCID&&("loteriaGasto"==site.pageInfo.promoName||"loteria-1919"==site.pageInfo.promoName||"loteria1919"==site.pageInfo.promoName?Promo.process():($("#steps").addClass("isCliked"),$(".promoImgFrame").remove(),$("#canvas-wrapper").show(),$("#page.promoContent").show(),$("#new-promo-design-divisadero").hide()),"frozen"==site.pageInfo.promoName&&$(".mnewdesignsmall").hide(),"undefined"!=typeof loadGame&&loadGame(),site.loggedToOpenPromo=!1,localStorage.setItem("site",JSON.stringify(site)))),site.loggedToOpenPromo=!1,localStorage.setItem("site",JSON.stringify(site))):("participar_boton"===e?"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_participar_sin_login"}):"participar_banner"===e&&"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_banner_sin_login"}),showModalLogin(),$("#loginFormulario .btn-sendform").attr("data-participar",!0))},bannerClickGtm:function(){void 0===site.isLogged.status?"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_banner_sin_login"}):sessionStorage.setItem("bannerOrButton","banner")},btnClickGtm:function(){void 0===site.isLogged.status?"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_participar_sin_login"}):sessionStorage.setItem("bannerOrButton","button")},openGDPRDuplicatedPromos:function(){"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"eventoPromos",promoManagementLabel:"btn_banner_ventajas_landing"}),$(".banner_ventajas_landing_promo_button").hide(),void 0!==site.isLogged.status&&"SI"!=String(site.isLogged.attributes.publicidad_GDPR).toUpperCase()?$("#GDPRDuplicatedPromos").foundation("open"):$(".banner_ventajas_landing_promo_image").removeClass("hide")}};var RecipeBookControllerNA=void 0===RecipeBookControllerNA?{}:RecipeBookControllerNA;RecipeBookControllerNA={init:function(){1==site.loggedRecipebook&&(RecipeBookControllerNA.clickWantBook(),site.loggedRecipebook=!1,localStorage.setItem("site",JSON.stringify(site)),sessionStorage.removeItem("loggedRecipebook"))},clickWantBook:function(){if(void 0!==site.isLogged.status)Utils.loader(),$.ajax("/ajax/recipebook/sendRecipebookEmail",{method:"POST",data:{recipebookODR:$(".pages-leaf-catalog").attr("data-odr")}}).done(function(e){if(Utils.loader(),e.exception){$("#catalog-error .modal-bottom-txt").prepend(e.exception.message+"<br/><br/>"),$("#catalog-error .ng-binding").html(e.exception.code);new Foundation.Reveal($("#catalog-error")).open()}else{$(".header-user-points span").html(e.pointsAvailable),$("#popupDownloadRecipe").foundation("open");var t="no logado",a="",o="",i=location.pathname.slice(1,3);void 0!=site.isLogged.literalCID&&(t="logado",o=site.isLogged.literalCIDEncrypt,void 0!=site.isLogged.attributes.sexo&&(a=site.isLogged.attributes.sexo));var n=window.location.pathname,r=n.replace(".html","").replace("/es","home").replace("/ca","home").replace("-"," "),s=document.title;dataLayer.push({event:"pop-up",pageName:r+"/"+s,auxPageName:r,userStatus:t,userID:o,gender:a,language:i})}}).fail(function(e){Utils.loader(),e.exception&&$("#catalog-error .ng-binding").html(e.exception.code),new Foundation.Reveal($("#catalog-error")).open()});else{showModalLogin(),$("#loginFormulario .btn-sendform").attr("data-recipebook",!0),"object"===("undefined"==typeof dataLayer?"undefined":_typeof(dataLayer))&&dataLayer.push({event:"userManagement",userManagementCategory:"login",userManagementAction:"acceso",userManagementLabel:"recetas"});var e=window.location.pathname,t=e.replace(".html","").replace("/es","home").replace("/ca","home").replace("-"," ");dataLayer.push({event:"pop-up",pageName:t+"/loginModal",auxPageName:t,userStatus:"no logado"})}},redirectToBookrecipes:function(){window.location.href="ca"==language?"/ca/books-receptes":"/es/books-recetas"}};var RedesignControllerNA=void 0===RedesignControllerNA?{}:RedesignControllerNA;RedesignControllerNA={init:function(){screen.width>=1024&&0==$(".bg-height").hasClass("home-section")&&0==$(".bg-height").hasClass("section-video")&&$(".bg-height").css("max-height",$("body").height()-$("#header").height()),$(document).ready(function(){$(".li-accordion-menu").click(function(){var e=this;$(e).hasClass("li-accordion-menu-hide")?($(e).removeClass("li-accordion-menu-hide"),$(e).addClass("li-accordion-menu-show"),$(e).find(".plus-icon").addClass("back-icon"),$(e).find(".plus-icon").removeClass("plus-icon")):($(e).removeClass("li-accordion-menu-show"),$(e).addClass("li-accordion-menu-hide"),$(e).find(".back-icon").addClass("plus-icon"),$(e).find(".back-icon").removeClass("back-icon")),$(".li-accordion-menu").each(function(t,a){a!=e&&($(a).removeClass("li-accordion-menu-show"),$(a).addClass("li-accordion-menu-hide"),$(a).find(".back-icon").addClass("plus-icon"),$(a).find(".back-icon").removeClass("back-icon"))})})})},playVideo:function(e){document.getElementById(e).play(),document.getElementById(e).closest(".section-video").classList.add("video-added")},endVideo:function(e){document.getElementById(e).closest(".section-video").classList.remove("video-added")}};var SacControllerNA=void 0===SacControllerNA?{}:SacControllerNA;SacControllerNA={init:function(){},submitForm:function(e){Utils.loader();var t=Utils.validateForm(e);if(t.errors.count)Utils.loader();else{if(t.success.params.canalEntrada=101,t.success.params.subcanalEntrada=116,t.success.params.idiomaContacto=language+"_"+("ca"==language?"ES":language.toUpperCase()),t.success.params.pais="pt"==language?"Portugal":"Spain",t.success.params.sexo="H",site.isLogged.literalCID){switch(t.success.params.nombre=void 0!==t.success.params.nombre?t.success.params.nombre:site.isLogged.attributes.nombre,site.isLogged.attributes.idioma_comunicaciones){case"es":t.success.params.idiomaContacto="es_ES";break;case"ca":t.success.params.idiomaContacto="ca_ES";break;case"pt":t.success.params.idiomaContacto="pt_PT"}switch(site.isLogged.pais){case"España":t.success.params.pais="Spain";break;case"Portugal":t.success.params.pais="Portugal"}switch(site.isLogged.attributes.sexo){case"hombre":case"homem":t.success.params.sexo="H";break;case"mujer":case"mulher":t.success.params.sexo="M"}}$.ajax({url:"/ajax/sac/doPetition",method:"POST",data:t.success.params}).done(function(t){"ok"==t.status?($("#promoErrorCode #code").text(),$("#promoErrorCode").addClass("hide"),Utils.openModal("#idSACResult"),e.reset()):($(".modal-bottom-txt").text(t.exception.message),$("#promoErrorCode #code").text(t.exception.code),$("#errorModal #promoErrorCode").removeClass("hide"),Utils.openModal("#errorModal")),window.dataLayer.push({event:"contacto",event_category:"sac",event_action:"formulario",event_label:"ok"}),Utils.loader()})}},requiredEmail:function(){$("#formSac_radio_telephone").parent().removeClass("dynamic"),$("#formSac_radio_email").parent().addClass("dynamic"),$("#formSac_telephone").attr("required",!1),$("#formSac_email").attr("required",!0)},requiredTelephone:function(){$("#formSac_radio_email").parent().removeClass("dynamic"),$("#formSac_radio_telephone").parent().addClass("dynamic"),$("#formSac_email").attr("required",!1),$("#formSac_telephone").attr("required",!0)}};var UnsuscribeControllerNA=void 0===UnsuscribeControllerNA?{}:UnsuscribeControllerNA;UnsuscribeControllerNA={init:function(){},submitFormUnsuscribe:function(e){Utils.loader();var t=Utils.validateForm(e);t.errors.count?Utils.loader():$.ajax({url:"/ajax/consumer/consumerUpdate",method:"POST",data:{publicidad_GDPR:"No",MB_COSAS_MEJORAR:t.success.params.motivo,MB_DEM_COMUNICACIONES:document.getElementById("q1").checked?"Si":null,MB_VENTAJAS_NO_ENCAJAN:document.getElementById("q2").checked?"Si":null,MB_INSATISFECHO:document.getElementById("q3").checked?"Si":null}}).done(function(e){"ok"===e.status?Utils.openModal("#unsuscribeOk"):(Utils.openModal("#unsuscribeKo"),$("#errorCode").removeClass("hide"),$("#code").html(e.exception.code)),Utils.loader()})}};var UserPointsControllerNA=void 0===UserPointsControllerNA?{}:UserPointsControllerNA;UserPointsControllerNA={init:function(){UserPointsControllerNA.calculateCircles(),UserPointsControllerNA.couponsHistoryTable(),UserPointsControllerNA.ordersHistoryTable(),UserPointsControllerNA.canvas("graph1"),UserPointsControllerNA.canvas("graph2"),UserPointsControllerNA.canvas("graph3")},calculateCircles:function(){var e=parseFloat(site.isLogged.registrationPercentage),t=parseFloat(site.isLogged.pointsExpired),a=0;a=site.isLogged.pointsAvailable.indexOf(",")?parseFloat(site.isLogged.pointsAvailable.replace(".","").replace(",",".")):parseFloat(site.isLogged.pointsAvailable);var o={};switch(o.points=a>=200?100:parseFloat(a/200*100),o.expires=parseFloat(t/a*100),o.completed=parseFloat(e),o.points){case 0:document.getElementById("graph1").attributes["data-percent"].value="99.9";break;case 100:document.getElementById("graph1").attributes["data-percent"].value="0.01";break;default:document.getElementById("graph1").attributes["data-percent"].value=100-o.points}switch(o.expires){case 0:document.getElementById("graph2").attributes["data-percent"].value="99.9";break;case 100:document.getElementById("graph2").attributes["data-percent"].value="0.01";break;default:document.getElementById("graph2").attributes["data-percent"].value=100-o.expires}0===o.completed?document.getElementById("graph3").attributes["data-percent"].value="99.9":o.completed>100?document.getElementById("graph3").attributes["data-percent"].value="0.01":document.getElementById("graph3").attributes["data-percent"].value=100-o.completed},couponsHistoryTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.ajax({url:"/ajax/consumer/consumerOrders",method:"POST",data:{page:e,type:"cupon"}}).done(function(t){if("ok"===t.status){for(var a="",o=0;o<t.products.length;o++)a+='\n\t\t\t\t\t\t<tr>\n                            <td class="text-left">\n                                <img class="cupon_image" src="%imageUrl%" alt="%imageAlt%">\n                                <span style="word-break: break-word;overflow: hidden;text-transform: none;height: 2.4em;line-height: 1.2em;word-wrap: break-word;"><strong>%descripcion%</strong></span>\n                            </td>\n\t\t\t\t\t\t\t<td>%fechaRedencion%</td>\n\t\t\t\t\t\t\t<td>%commerceExpirationDate%</td>\n\t\t\t\t\t\t\t<td style="color: red">-%puntosTotalesRedimidos%</td>\n\t\t\t\t\t\t\t<td>%discountValue%€</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%fechaRedencion%/g,t.products[o].fechaRedencion),a=a.replace(/%commerceExpirationDate%/g,void 0!==t.products[o].commerceExpirationDate?t.products[o].commerceExpirationDate:""),a=a.replace(/%descripcion%/g,t.products[o].descripcion),a=a.replace(/%discountValue%/g,void 0!==t.products[o].discountValue?t.products[o].discountValue:""),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[o].puntosTotalesRedimidos),a=a.replace(/%imageAlt%/g,void 0!==t.products[o].image?t.products[o].image.alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[o].image?t.products[o].image.url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","298/170");$("#table_coupons tbody.show-for-large").html(a),$("#ordersHistoryTableEmpty").addClass("hide"),$("#table_coupons").removeClass("hide"),a="";for(var i=0;i<t.products.length;i++)a+='\n\t\t\t\t\t\t<tr style="border: 1px solid #ececec;">\n\t\t\t\t\t\t\t<td class="text-left">\n\t\t\t\t\t\t\t\t<span class="list-elem-span-up">\n\t\t\t\t\t\t\t\t\t<img class="cupon_image" src="%imageUrl%" alt="%imageAlt%">\n\t\t\t\t\t\t\t\t\t<strong>%descripcion%</strong><br/>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="list-elem-span-bottom">\n\t\t\t\t\t\t\t\t\t<div class="div-span-2-cols">%profileHistory_print%</div> <div class="div-span-2-cols">%fechaRedencion%</div>\n\t\t\t\t\t\t\t\t\t<div class="div-span-2-cols">%profileHistory_validate%</div> <div class="div-span-2-cols">%commerceExpirationDate%</div>\n\t\t\t\t\t\t\t\t\t<div class="div-span-2-cols">%profileHistory_pointsUppercase%</div> <div class="div-span-2-cols"><font color="red">-%puntosTotalesRedimidos%€</font></div>\n\t\t\t\t\t\t\t\t\t<div class="div-span-2-cols">%profileHistory_savingUppercase%</div> <div class="div-span-2-cols"><strong>%discountValue%€</strong></div>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%profileHistory_print%/g,"es"==language?"Fecha de Impresión":"Data d'Impressió"),a=a.replace(/%profileHistory_validate%/g,"es"==language?"Validez en caja":"Vàlid a caixa"),a=a.replace(/%profileHistory_savingUppercase%/g,"es"==language?"Mi ahorro":"Estalvi"),a=a.replace(/%profileHistory_pointsUppercase%/g,"es"==language?"Puntos":"Punts"),a=a.replace(/%fechaRedencion%/g,t.products[i].fechaRedencion),a=a.replace(/%commerceExpirationDate%/g,t.products[i].commerceExpirationDate),a=a.replace(/%descripcion%/g,t.products[i].descripcion),a=a.replace(/%discountValue%/g,t.products[i].discountValue),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[i].puntosTotalesRedimidos),a=a.replace(/%imageAlt%/g,void 0!==t.products[i].image?t.products[i].image.alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[i].image?t.products[i].image.url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","298/170");if($("#table_coupons tbody.hide-for-large").html(a),$("#ordersHistoryTableEmpty").addClass("hide"),$("#table_coupons").removeClass("hide"),t.productosTotales/20>1){
for(var n="",r=!1,s=!1,l=Math.round(parseInt(t.productosTotales/20)),d=e+2<Math.round(parseInt(t.productosTotales/20))?e+2:Math.round(parseInt(t.productosTotales/20)),c=e>=4?e:1;c<=d;c++)!r&&e>=4&&(r=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.couponsHistoryTable(1)">1</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.couponsHistoryTable(%page-2%)">%page-2%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.couponsHistoryTable(%page-1%)">%page-1%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%page-1%/g,e-1),n=n.replace(/%page-2%/g,e-2)),n+='\n\t\t\t\t\t\t\t<li class="%active%">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.couponsHistoryTable(%page%)">%page%</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t',n=n.replace(/%active%/g,c==e?"active":""),n=n.replace(/%page%/g,c),s||d!=c||c===l||(s=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.couponsHistoryTable(%lastNumber%)">%lastNumber%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%lastNumber%/g,l));$("#pagination_coupons ul").html(n),$("#pagination_coupons").removeClass("hide")}}})},ordersHistoryTable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.ajax({url:"/ajax/consumer/consumerOrders",method:"POST",data:{page:e,type:"regalo"}}).done(function(t){if("ok"===t.status){$("#total_orders").text(t.productosTotales),$("#saving_orders").text(t.ahorroTotal);for(var a="",o=0;o<t.products.length;o++)a+='\n\t\t\t\t\t\t<tr>\n                            <td class="text-left">\n                                <img class="cupon_image" src="%imageUrl%" witdh="298" height="170" alt="%imageAlt%">\n                                <span><strong>%descripcion%</strong></span>\n                            </td>\n\t\t\t\t\t\t\t<td>%fechaRedencion%</td>\n\t\t\t\t\t\t\t<td>%costeTotal%€</td>\n\t\t\t\t\t\t\t<td style="color: red">-%puntosTotalesRedimidos%</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%fechaRedencion%/g,t.products[o].fechaRedencion),a=a.replace(/%imageAlt%/g,void 0!==t.products[o].detailImage?t.products[o].detailImage[0].alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[o].detailImage?t.products[o].detailImage[0].url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","original"),a=a.replace(/%descripcion%/g,t.products[o].descripcion),a=a.replace(/%costeTotal%/g,t.products[o].costeTotal),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[o].puntosTotalesRedimidos);$("#ordersHistoryTableEmpty tbody.show-for-large").html(a),a="";for(var i=0;i<t.products.length;i++)a+='\n\t\t\t\t\t\t<tr style="border: 1px solid #ececec;">\n\t\t\t\t\t\t\t<td class="text-left">\n\t\t\t\t\t\t\t\t<span class="list-elem-span-up">\n\t\t\t\t\t\t\t\t\t<img class="cupon_image" src="%imageUrl%" witdh="30%" alt="%imageAlt%">\n\t\t\t\t\t\t\t\t\t<strong>%descripcion%</strong><br/>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="list-elem-span-bottom">\n\t\t\t\t\t\t\t\t\t<div class="div-span-2-cols">%profileHistory_exchange%</div> <div class="div-span-2-cols">%fechaRedencion%</div><br/>\n\t\t\t\t\t\t\t\t\t<div class="div-span-2-cols">%profileHistory_pointsUppercase%</div> <div class="div-span-2-cols">-<strong>%puntosTotalesRedimidos%</strong></div><br/>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t',a=a.replace(/%imageAlt%/g,void 0!==t.products[i].detailImage?t.products[i].detailImage[0].alt:""),a=a.replace(/%imageUrl%/g,void 0!==t.products[i].detailImage?t.products[i].detailImage[0].url:"/images/demo/points-product-img3.png"),a=a.replace("%WIDTH%/%HEIGHT%","original"),a=a.replace(/%descripcion%/g,t.products[i].descripcion),a=a.replace(/%profileHistory_exchange%/g,"es"==language?"Fecha de Canjeo":"Data d'Bescanvi"),a=a.replace(/%fechaRedencion%/g,t.products[i].fechaRedencion),a=a.replace(/%profileHistory_priceUppercase%/g,"es"==language?"PRECIO":"PREU"),a=a.replace(/%costeTotal%/g,t.products[i].costeTotal),a=a.replace(/%profileHistory_pointsUppercase%/g,"es"==language?"Puntos":"Punts"),a=a.replace(/%puntosTotalesRedimidos%/g,t.products[i].puntosTotalesRedimidos);if($("#ordersHistoryTableEmpty tbody.hide-for-large").html(a),Math.round(parseInt(t.productosTotales/20)>1)){for(var n="",r=!1,s=!1,l=Math.round(parseInt(t.productosTotales/20)),d=e+2<Math.round(parseInt(t.productosTotales/20))?e+2:Math.round(parseInt(t.productosTotales/20)),c=e>=4?e:1;c<=l;c++)!r&&e>=4&&(r=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.ordersHistoryTable(1)">1</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.ordersHistoryTable(%page-2%)">%page-2%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.ordersHistoryTable(%page-1%)">%page-1%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%page-1%/g,e-1),n=n.replace(/%page-2%/g,e-2)),n+='\n\t\t\t\t\t\t\t<li class="%active%">\n\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.ordersHistoryTable(%page%)">%page%</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t',n=n.replace(/%active%/g,c==e?"active":""),n=n.replace(/%page%/g,c),s||d!=c||c===l||(s=!0,n+='\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);">...</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" onclick="UserPointsControllerNA.ordersHistoryTable(%lastNumber%)">%lastNumber%</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t',n=n.replace(/%lastNumber%/g,l));$("#pagination_orders ul").html(n),$("#pagination_orders").removeClass("hide")}}})},canvas:function(e){var t=document.getElementById(e);t.childNodes.length&&t.childNodes[0].remove();var a={percent:t.getAttribute("data-percent")||25,size:t.getAttribute("data-size")||150,lineWidth:t.getAttribute("data-line")||15,rotate:t.getAttribute("data-rotate")||0,text:t.getAttribute("data-text")||"",content:t.getAttribute("data-content")||""},o=document.createElement("canvas"),i=document.createElement("div"),n=document.createElement("h5");n.textContent=a.text;var r=document.createElement("span");r.textContent=a.content,"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(o);var s=o.getContext("2d");o.width=o.height=a.size;var l=s.createLinearGradient(0,0,0,100);l.addColorStop(0,"#4d71b5"),l.addColorStop(.2,"#63a7e5"),l.addColorStop(.25,"#69b2f0"),l.addColorStop(.5,"#4d70b3"),l.addColorStop(.75,"#33327b"),l.addColorStop(1,"#1a1945"),t.appendChild(o),t.appendChild(i),i.appendChild(n),i.appendChild(r),s.translate(a.size/2,a.size/2),s.rotate((a.rotate/180-.5)*Math.PI);var d=(a.size-a.lineWidth)/2,c=function(e,t,a){a=Math.min(Math.max(0,a||1),1),s.beginPath(),s.arc(0,0,d,0,2*Math.PI*a,!0),s.strokeStyle=e,s.lineCap="round",s.lineWidth=t,s.stroke()};c("#eee",a.lineWidth,1),c(l,a.lineWidth,a.percent/100)},tagging:function(e){dataLayer.push({event:"mi_cuenta_puntos",event_category:"cuenta de puntos",event_action:e,event_label:window.location.href})}};var UserUnregisterControllerNA=void 0===UserUnregisterControllerNA?{}:UserUnregisterControllerNA;UserUnregisterControllerNA={init:function(){UserUnregisterControllerNA.events(),document.getElementById("userMail").value=site.isLogged.email},events:function(){$("#userBajaPwd").blur(function(){$("#userBajaPwd").removeClass("user-baja-input-error")})},verifyPassword:function(){if(""!=$("#userBajaPwd").val()&&void 0!=$("#userBajaPwd").val()){Utils.loader();var e={};switch(e.password=$("#userBajaPwd").val(),e.nombre=site.isLogged.attributes.nombre,e.correoElectronico=site.isLogged.email,e.telefonoMovil=site.isLogged.attributes.telefono_1?site.isLogged.attributes.telefono_1:null,e.idiomaContacto="es_ES",e.pais="Spain",e.sexo="H",site.isLogged.attributes.idioma_comunicaciones){case"es":e.idiomaContacto="es_ES";break;case"ca":e.idiomaContacto="ca_ES";break;case"pt":e.idiomaContacto="pt_PT"}switch(site.isLogged.pais){case"España":e.pais="Spain";break;case"Portugal":e.pais="Portugal"}switch(site.isLogged.attributes.sexo){case"hombre":case"homem":e.sexo="H";break;case"mujer":case"mulher":e.sexo="M"}$.ajax({url:"/ajax/consumer/unregisterSAC",method:"POST",data:e,success:function(e){Utils.loader(),e.exception?(etiquetado("confirmar_eliminar_cuenta","cerrar cuenta","confirmar y continuar","ko"),"ILREG0009"==e.exception.code?($("#userBajaPwd").addClass("user-baja-input-error"),$("#wrongPasswordMessageUserBajaPwd").show(),$("#sacErrorMessageUserBajaPwd").hide()):($("#wrongPasswordMessageUserBajaPwd").hide(),$("#sacErrorMessageUserBajaPwd").show())):($("#popupUserBaja").foundation("open"),$("#userBajaPwd").removeClass("user-baja-input-error"),$("#wrongPasswordMessageUserBajaPwd").hide(),$("#sacErrorMessageUserBajaPwd").hide(),etiquetado("confirmar_eliminar_cuenta","cerrar cuenta","confirmar y continuar","ok"))}})}else etiquetado("confirmar_eliminar_cuenta","cerrar cuenta","confirmar y continuar","ko"),$("#userBajaPwd").addClass("user-baja-input-error"),$("#wrongPasswordMessageUserBajaPwd").hide(),$("#sacErrorMessageUserBajaPwd").hide()}};var SlickSetting=void 0===SlickSetting?{}:SlickSetting;SlickSetting={loadSetting:function(e,t){if(!$(e).hasClass("slick-initialized"))if(void 0!==t){var a=$(e).attr("initialSlide");void 0!==a&&(SlickSetting[t].initialSlide=parseInt(a)),$(e).slick(SlickSetting[t])}else $(e).slick()},slickConfigHome:{infinite:!1,arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:5e3},slickConfigPagethegood:{arrows:!0,dots:!0,autoplay:!1,autoplaySpeed:8e3,mobileFirst:!0},slickConfigPagefenix:{arrows:!0,dots:!0,autoplay:!1,autoplaySpeed:8e3,mobileFirst:!0},slickConfigPagecontent_completed:{arrows:!0,dots:!0,autoplay:!1,autoplaySpeed:8e3,mobileFirst:!0},catalogMovieSliderConfig:{arrows:!1,dots:!0,autoplay:!0,autoplaySpeed:4e3,mobileFirst:!0},slickConfigPrintCoupon:{infinite:!1,arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1,autoplay:!1,autoplaySpeed:5e3},slickConfigBcorp:{arrows:!0,dots:!1,autoplay:!0,autoplaySpeed:4e3,mobileFirst:!0}},window.addEventListener("load",function(){if($("span.icon-eye-closed, span.icon-eye-open").on("click",function(){var e=$(this).parent().find("input");"text"===e.attr("type")?($(this).removeClass("icon-eye-open").addClass("icon-eye-closed"),e.attr("type","password")):($(this).removeClass("icon-eye-closed").addClass("icon-eye-open"),e.attr("type","text"))}),$("*[data-tagging]").one("click",function(e){var t=$(e.currentTarget).data("tagging");"object"===(void 0===t?"undefined":_typeof(t))&&window.dataLayer.push(t)}),$("input, select").on("change",function(){Utils.validateFieldForm(this)}),!sessionStorage.getItem("GDPR_modal_showed")){var e=[];e.push(["/es"]),e.push(["/ca"]),e.push(["home/reivindiquemos-lo-bueno"]),e.push(["home/reivindiquem-el-que-es-bo"]),e.push(["home/salud"]),e.push(["home/salut"]),e.push(["home/familia-y-hogar"]),e.push(["home/familia-i-llar"]),e.push(["home/recetas"]),e.push(["home/receptes"]),e.push(["home/yogur"]),e.push(["home/iogurt"]),e.push(["home/desayuno"]),e.push(["home/esmorzar"]),e.push(["home/ahorra/sumar-puntos"]),e.push(["home/estalvia/sumar-punts/"]),e.push(["home/consumer/refund"]),e.push(["home/ahorra/imprimir-cupones"]),e.push(["home/estalvia/imprimir-cupons"]),e.push(["home/descuentos"]),e.push(["home/descomptes"]),e.push(["home/originales"]),e.push(["home/originals"]),e.push(["home/cine"]),e.push(["home/cinema"]),e.push(["home/puntos-solidarios"]),e.push(["home/punts-solidaris"]),e.push(["home/promocions"]),e.push(["home/promocions"]);var t,a,o="No";for(t=0,a=e.length;t<a;++t)if(-1!==url.indexOf(e[t])){o="Yes";break}"Yes"===o&&void 0!==site.isLogged.status&&"SI"!=String(site.isLogged.attributes.publicidad_GDPR).toUpperCase()&&($("#GDPR").foundation("open"),sessionStorage.setItem("GDPR_modal_showed",!0))}$(".modalCoupon, #confirmPopup").bind("open.zf.reveal",function(e){void 0!==site.isLogged.status&&"SI"!=String(site.isLogged.attributes.publicidad_GDPR).toUpperCase()&&$("#GDPR").foundation("open")}),$(".pages-product_page_catalog_originals .box-button").bind("click",function(e){void 0!==site.isLogged.status&&"SI"!=String(site.isLogged.attributes.publicidad_GDPR).toUpperCase()&&$("#GDPR").foundation("open")}),$(".pages-product_page_catalog_discounts #statusPopup").bind("closed.zf.reveal",function(e){void 0!==site.isLogged.status&&"SI"!=String(site.isLogged.attributes.publicidad_GDPR).toUpperCase()&&$("#GDPR").foundation("open")}),$("#boxIntangibles .close-button").bind("click",function(e){void 0!==site.isLogged.status&&"SI"!=String(site.isLogged.attributes.publicidad_GDPR).toUpperCase()&&$("#GDPR").foundation("open")})});var expresions={required:/^[^]+$/,email_format:/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,3}$/,no_digits:/\D+/,only_digits:/[0-9]+/,no_repeat_strings_3:/(?!.*([a-zA-Z])\1{2,}).+/,no_repeat_chars_3:/(?:(.)(?!\1{2})){1,}/,poblation_chars:/[a-zA-ZñÑçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\-\s]+/,poblation_chars_min:/[a-zA-ZñÑçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\-\s]{2,}/,poblation_chars_max:/[a-zA-ZñÑçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\-\s]{2,60}/,name_surname_chars:/[a-zA-ZñÑªºçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\-\s]+/,name_surname_chars_min:/[a-zA-ZñÑªºçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\-\s]{2,}/,name_surname_chars_max:/[a-zA-ZñÑªºçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\-\s]{2,60}/,"5_digits":/[0-9]{5}/,"9_digits":/[0-9]{9}/,cp_format_pt:/(\d{4}([\-]\d{3})?)/,cp_canarias:/^([0-2]{1}[0-9]{4}|([4-9]{1}[0-9]{4})|[3]{1}([0-4]{1}|[6-7]{1}|[9]{1})[0-9]{3})/,range_01000_52999:/^[0]{1}[1-9]{1}[0-9]{3}$|^[1-4]{1}[0-9]{4}$|^[5]{1}[0-2]{1}[0-9]{3}/,format_date_chars:/[0-9\/]+/,validate_date:/^([0-2][0-9]|3[0-1])(\/|-)(0[1-9]|1[0-2])\2(\d{4})$/,validate_phone_init:/^(6|7|8|9)[0-9]{8}/,profileSendModal_address_invalid1:/[a-zA-ZñÑçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\s0-9ªº\/-]+/,profileSendModal_address_invalid2:/[a-zA-ZñÑçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\s0-9ªº\/-]{2,40}/,profileSendModal_address_invalid3:/(?:([a-zA-ZñÑçÇäëïöüáéíóúÄËÏÜÖÁÉÍÓÚÀÈÌÒÙàèìòù\s0-9ªº\/-])(?!(.*)\1{3})){2,40}/,min:/min/,max:/max/},Utils=function(){function Utils(){_classCallCheck(this,Utils)}return _createClass(Utils,null,[{key:"loader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"footer",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default-loader";this.hasClass(document.querySelectorAll(e)[0],"loading")?(document.querySelectorAll(e)[0].classList.remove("loading"),document.querySelectorAll(e+" ."+t).length&&document.querySelectorAll(e+" ."+t)[0].parentNode.removeChild(document.querySelectorAll(e+" ."+t)[0])):(document.querySelectorAll(e)[0].classList.add("loading"),document.querySelectorAll(e).length&&(document.querySelectorAll(e)[0].innerHTML+="<div class='"+t+"'></div>"))}},{key:"hasClass",value:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}},{key:"openModal",value:function(e){var t=new Foundation.Reveal($(e));t.open(),Utils.pushEventPopUp(t.id)}},{key:"pushEventPopUp",value:function(e){void 0!==site.isLogged.literalCID?dataLayer.push({event:"pop-up",pageName:url+"/"+e,auxPageName:url,brand:site.pageInfo.brand,userID:site.isLogged.externalConsumerId,gender:site.isLogged.attributes.sexo,language:site.isLogged.attributes.idioma_comunicaciones,userStatus:"logado"}):dataLayer.push({event:"pop-up",pageName:window.url+"/"+e,auxPageName:window.url,brand:window.site.pageInfo.brand,userStatus:"no logado"})}},{key:"replacePatter",value:function(e,t,a){$(e).html($(e).html().replace(t,a))}},{key:"capitalize",value:function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})}},{key:"watching",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments[3];Object.defineProperty(e,t,{configurable:!0,get:function(){return void 0===e.property?a:e.property},set:function(t){e.property=t,"function"==typeof o&&o()}})}},{key:"show",value:function(){for(var e=document.querySelectorAll("[data-show]"),t=0;t<e.length;t++)e[t].attributes["data-show"].value?e[t].style.display="block":e[t].style.display="none"}},{key:"selectCustomized",value:function(e,t){$(e).each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var a=e.next("div.select-styled");a.text(e.children("option").eq(0).text());for(var o=$("<ul />",{class:"select-options"}).insertAfter(a),i=0;i<t;i++)$("<li />",{text:e.children("option").eq(i).text(),rel:e.children("option").eq(i).val()}).appendTo(o);var n=o.children("li");a.click(function(e){e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).toggleClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle()}),n.click(function(t){t.stopPropagation(),a.text($(this).text()).toggleClass("active"),e.val($(this).attr("rel")),o.hide()}),$(document).click(function(){a.toggleClass("active"),o.hide()})})}},{key:"validateForm",value:function(e){for(var t=e.querySelectorAll('input:not([type="submit"]):not([type="button"]),select,textarea'),a={success:{count:0,fields:[],params:{}},errors:{count:0,fields:[],params:{}}},o=0;o<t.length;o++){var i=null,n=t[o];if($(n).is('[type="button"]')&&$(n).hasClass("button"))break;Utils.validateFieldForm(n),n.checkValidity()?(!$(n).is("[type=radio]")&&!$(n).is("[type=checkbox]")||$(n).prop("checked"))&&($(n).parent().is("fieldset")&&(i=$(n).parent()),$(n).parent().parent().is("fieldset")&&(i=$(n).parent().parent()),null===i||i.hasClass("fs-promo-code")||$(i).unbind().bind("click",function(){$(this).removeClass("errorFieldset")}),a.success.count++,a.success.fields.push($(n)),void 0!==_typeof($(n).attr("name"))&&null!==$(n).attr("name")&&(-1!==$(n).attr("name").indexOf("[]")?(void 0===a.success.params[$(n).attr("name").replace("[]","")]&&(a.success.params[$(n).attr("name").replace("[]","")]=[]),a.success.params[$(n).attr("name").replace("[]","")].push($(n).val())):a.success.params[$(n).attr("name")]=$(n).val())):($(n).parent().is("fieldset")&&(i=$(n).parent()),$(n).parent().parent().is("fieldset")&&(i=$(n).parent().parent()),null===i||i.hasClass("fs-promo-code")||$(i).unbind().bind("click",function(){$(this).removeClass("errorFieldset")}),i.addClass("errorFieldset"),a.errors.count++,a.errors.fields.push($(n)),-1!==$(n).attr("name").indexOf("[]")?(void 0===a.errors.params[$(n).attr("name").replace("[]","")]&&(a.errors.params[$(n).attr("name").replace("[]","")]=[]),a.errors.params[$(n).attr("name").replace("[]","")].push({i:$(n).val()})):a.errors.params[$(n).attr("name")]=$(n).val())}var r=e.querySelectorAll(".errorFieldset");if(r.length>0)for(var s=0;s<r.length;s++){var l=r[s].querySelector('input:not([type="submit"]),select,textarea');void 0===a.errors.params[$(l).attr("name").replace("[]","")]&&(a.errors.count++,a.errors.fields.push($(l)),-1!==$(l).attr("name").indexOf("[]")?(void 0===a.errors.params[$(l).attr("name").replace("[]","")]&&(a.errors.params[$(l).attr("name").replace("[]","")]=[]),a.errors.params[$(l).attr("name").replace("[]","")].push({i:$(l).val()})):a.errors.params[$(l).attr("name")]=$(l).val())}return a}},{key:"validateFieldForm",value:function validateFieldForm(fieldForm){var e=fieldForm,isValid=!1,fieldset=null;if(e.hasAttribute("patterns")){var patterns=e.getAttribute("patterns");patterns="Object"==typeof patterns?patterns:eval("("+patterns+")");for(var pattern in patterns){var checkValidity=!0;if("min"===pattern)if(/(\d{2}).(\d{2}).(\d{4})/.test(e.value)){var dateVal=e.value.replace(/(\d{2}).(\d{2}).(\d{4})/,"$2/$1/$3"),dateMin=e.min.replace(/(\d{2}).(\d{2}).(\d{4})/,"$2/$1/$3");checkValidity=Date.parse(dateVal)>=Date.parse(dateMin)}else checkValidity=e.value>=e.min;else if("max"===pattern)if(/(\d{2}).(\d{2}).(\d{4})/.test(e.value)){var dateVal=e.value.replace(/(\d{2}).(\d{2}).(\d{4})/,"$2/$1/$3"),dateMax=e.max.replace(/(\d{2}).(\d{2}).(\d{4})/,"$2/$1/$3");checkValidity=Date.parse(dateVal)<=Date.parse(dateMax)}else checkValidity=e.value<=e.max;else e.pattern=String(expresions[pattern]).replace(/(\/)(.*)(\/)/,"$2");if(!e.checkValidity()||!checkValidity){$(e).parent().is("fieldset")&&(fieldset=$(e).parent()),$(e).parent().parent().is("fieldset")&&(fieldset=$(e).parent().parent()),null===fieldset||fieldset.hasClass("fs-promo-code")||$(fieldset).unbind().bind("click",function(){$(this).removeClass("errorFieldset"),fieldset.next().hasClass("warnings")?fieldset.next().html(""):fieldset.hasClass("fs-postalcode")?$(".warning-postalcode").html(""):fieldset.next().next().hasClass("warnings")&&(fieldset.next().next().removeClass("active"),fieldset.next().next().html(""))}),fieldset.addClass("errorFieldset"),fieldset.next().hasClass("warnings")?fieldset.next().html(patterns[pattern]):fieldset.hasClass("fs-postalcode")?$(".warning-postalcode").html(patterns[pattern]):fieldset.next().next().hasClass("warnings")&&(fieldset.next().next().html(patterns[pattern]),fieldset.next().next().addClass("active"));break}$(e).parent().is("fieldset")&&(fieldset=$(e).parent()),$(e).parent().parent().is("fieldset")&&(fieldset=$(e).parent().parent()),null===fieldset||fieldset.hasClass("fs-promo-code")||$(fieldset).unbind().bind("click",function(){$(this).removeClass("errorFieldset")}),isValid=!0}}else e.checkValidity()?($(e).parent().is("fieldset")&&(fieldset=$(e).parent()),$(e).parent().parent().is("fieldset")&&(fieldset=$(e).parent().parent()),null===fieldset||fieldset.hasClass("fs-promo-code")||$(fieldset).unbind().bind("click",function(){$(this).removeClass("errorFieldset")}),isValid=!0):($(e).parent().is("fieldset")&&(fieldset=$(e).parent()),$(e).parent().parent().is("fieldset")&&(fieldset=$(e).parent().parent()),null===fieldset||fieldset.hasClass("fs-promo-code")||$(fieldset).unbind().bind("click",function(){$(this).removeClass("errorFieldset")}),fieldset.addClass("errorFieldset"));return isValid}},{key:"validateDNINIF",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined",a=!0;if(void 0!==t&&t.required||""!==e){var o=/^[0-9]{8}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/i,i=/^[XYZ]{1}[0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKET]{1}$/i,n=e.toString().toUpperCase();if(o.test(n)||i.test(n)){var r=n.replace(/^[X]/,"0").replace(/^[Y]/,"1").replace(/^[Z]/,"2"),s=n.substr(-1);a="TRWAGMYFPDXBNJZSQVHLCKET".charAt(parseInt(r.substr(0,8))%23)===s}else a=!1;null===t||a||$(t).data("valid",!1).parent().addClass("errorFieldset"),null!==t&&a&&$(t).data("valid",!0).parent().removeClass("errorFieldset")}return a}},{key:"request",value:function(e){return new Promise(function(t,a){var o=new XMLHttpRequest;o.open(e.method||"POST",e.url),e.headers&&Object.keys(e.headers).forEach(function(t){o.setRequestHeader(t,e.headers[t])}),o.onload=function(){o.status>=200&&o.status<300?t(o.response):a(o.statusText)},o.onerror=function(){return a(o.statusText)},o.send(e.body)})}},{key:"loadFormsData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];"undefined"===t[0]&&(t[0]=t);var a=this;this.request(e).then(function(e){a.populateForm(e,t)})}},{key:"populateForm",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=0;a<t.length;a++)if(null!=document.getElementById(t[a])&&void 0!==document.getElementById(t[a]).querySelectorAll("form")[0]){var o=document.getElementById(t[a]).querySelectorAll("form")[0],i=o.querySelectorAll("input, textarea, select");for(var n in i)if(i.hasOwnProperty(n))if(void 0!==JSON.parse(e)[i[n].name])i[n].value=JSON.parse(e)[i[n].name];else{if(null!==JSON.parse(e).attributes[i[n].name]&&void 0!==JSON.parse(e).attributes[i[n].name]&&-1!==JSON.parse(e).attributes[i[n].name].indexOf("/")){var r=JSON.parse(e).attributes[i[n].name].split("/");if(3===r.length){i[n].value=r[2]+"-"+r[1]+"-"+r[0];continue}}if("SELECT"===i[n].nodeName)for(var s=0;s<i[n].length;s++)if(i[n][s].value===JSON.parse(e).attributes[i[n].name]){i[n][s].setAttribute("selected","selected");break}i[n].value=JSON.parse(e).attributes[i[n].name]}}}},{key:"submitForm",value:function(e,t){}},{key:"isIE",value:function(){return"Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)}}]),Utils}();